/*!
 * 
 * 	@aerisweather/javascript-sdk - 1.8.4
 * 	(c) 2024 AerisWeather
 * 	License: BSD
 * 	https://www.aerisweather.com/support/docs/toolkits/aeris-js-sdk/
 * 
 */
(this.webpackJsonp=this.webpackJsonp||[]).push([["aerisweather.apps"],{YoRi:function(t,e,s){"use strict";s.d(e,"c",(function(){return c})),s.d(e,"a",(function(){return l})),s.d(e,"b",(function(){return h}));s("UxlC");var i=s("0lfv"),n=s("v3JS");const a={imperial:{temp:"&deg;F",speed:" mph",distance:" mi",height:" ft",pressure:" in",percent:"%",precip:'"',rain:'"',snow:'"',text:"",degree:"&deg;"},metric:{temp:"&deg;C",speed:" km/h",distance:" km",height:" m",pressure:" mb",percent:"%",precip:" mm",rain:" mm",snow:" cm",phrase:"met",degree:"&deg;"}},o={temp:"(temp|dewpoint|dewpt|feelslike|windchill|heatindex)",speed:"(speed|gust|wind)",distance:"(visibility|distance)",height:"(ceiling|elev|elevation|height|ht)",pressure:"(pressure|altimeter)",rain:"(precip|rain|prcp)",snow:"(snow|snowdepth|hail)",text:"(phrase)",percent:"(rh|humid|pop|prob|sky|skycover)"},c=function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?a.metric[t]||"":a.imperial[t]||""},r=function(t,e){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"--",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(!1===Object(i.isset)(t))return r;const h=(t=>{let e;return t=(t||"").toLowerCase().replace(/\s/g,""),void 0!==o[t]?t:/prob(ability)?/.test(t)?"percent":(Object.keys(o).forEach((s=>{new RegExp(o[s],"i").test(t)&&(e=s)})),e)})(e);if(!h)return"".concat(t);let d=0,u="",p=" ";return"temp"===h?p="":"pressure"===h?d=s?0:2:"rain"===h?d=s?1:2:"snow"===h?d=1:"distance"===h&&(d=2),t=d>0?parseFloat(t).toFixed(d):Math.round(t),a&&(u=c(h,s),Object(i.isset)(l)&&(u=l.replace(/{{units}}/,u))),"".concat(Object(n.a)(t,d)).concat(p).concat(u)},l=function(t,e){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=s&&(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||e;return r(Object(i.get)(t,n),n,s,!0,"N/A",'<span class="units">{{units}}</span>')},h=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=[],i=Math.floor(t/3600),n=Math.floor((t-3600*i)/60),a=Math.floor(t-3600*i-60*n);return i>0&&s.push("".concat(i," hr")),n>0&&s.push("".concat(n," min")),e&&a>0&&s.push("".concat(a," sec")),s.join(", ")}},ZYXs:function(t,e,s){"use strict";s.d(e,"b",(function(){return n})),s.d(e,"i",(function(){return a})),s.d(e,"h",(function(){return o})),s.d(e,"e",(function(){return c})),s.d(e,"g",(function(){return r})),s.d(e,"f",(function(){return l})),s.d(e,"a",(function(){return h})),s.d(e,"d",(function(){return d})),s.d(e,"c",(function(){return u}));var i=s("0lfv");const n=(t,e,s,n)=>{let a=0,o=0;if(n=Object(i.extend)({x:0,y:0},n),Object(i.isString)(t)){const i=t;a=(s.width-e.width)/2,o=(s.height-e.height)/2,/^top/.test(i)?o=0:/^bottom/.test(i)&&(o=s.height-e.height),/left$/.test(i)?a=0:/right$/.test(i)&&(a=s.width-e.width)}else{const e=t;a=e.x,o=e.y}return a+=n.x,o+=n.y,{x:a,y:o}},a=()=>{if(!window)return{width:null,height:null};let t="normal",e="normal";return window.matchMedia("(max-width: 500px)").matches?t="compact":window.matchMedia("(min-width: 1000px)").matches&&(t="desktop"),window.matchMedia("(max-height: 500px)").matches?e="compact":window.matchMedia("(min-height: 1000px)").matches&&(e="desktop"),{width:t,height:e}},o=t=>-1!==["topleft","top","topright"].indexOf(t),c=t=>-1!==["bottomleft","bottom","bottomright"].indexOf(t),r=t=>-1!==["left","center","right"].indexOf(t),l=t=>-1!==["top","center","bottom"].indexOf(t),h=(t,e,s)=>{const i=Object.assign({},t);return(t=>-1!==["topleft","left","bottomleft"].indexOf(t))(s)?t.right=t.left+e.width:(t=>-1!==["topright","right","bottomright"].indexOf(t))(s)&&(t.left=t.right-e.width),i},d=function(t,e){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=t.left>=e.left&&t.left<=e.right,n=t.right>=e.left&&t.right<=e.right,a=t.top>=e.top&&t.top<=e.bottom,o=t.bottom>=e.top&&t.bottom<=e.bottom;return s?a||o||n||i:(a||o)&&(n||i)},u=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{top:t.top+e,bottom:t.bottom-e,left:t.left+e,right:t.right-e,width:t.width-2*e,height:t.height-2*e}}},"bRx/":function(t,e,s){"use strict";s.r(e),s.d(e,"Apps",(function(){return Ct}));s("UxlC"),s("3bBZ");var i=s("m0x2"),n=s("5kaa"),a=s("0lfv"),o=s("pAjv"),c=s("ZYXs"),r=s("3j3Q");class l extends i.a{get $el(){return this._target}get id(){return this.opts.id}get opts(){return this._opts}get ui(){return this._ui}get data(){return this._data}get isRendered(){return this._renderCount>0&&void 0!==this._target.parent()}constructor(t,e){super(),this._renderCount=0,t=Object(a.extend)({className:Object(o.prefixCSSClassName)("app__view"),renderer:null,requiresData:!1},t),this._opts=t,this._ui={},this._needsRender=!0,this._data=Object(a.cloneDeep)(e)}get isMounted(){return Object(a.isset)(this.parent())}el(t){return Object(r.a)(t,this.$el)}initialize(t){t=Object.assign(Object.assign({},this._data),t);let e=this._render(t);e&&(e=e.replace(/^[^<]+/,"").replace(/[\n\r\t.]+$/,""),this._target=Object(r.a)(e),this._afterRender())}addTo(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(!t)throw new Error("[Aeris] Invalid DOM target specified for View.addTo()");const i=Object(r.a)(t);e&&i.empty();const n=this._render(this._data);if(s>=0){const t=i.children();s>=t.length?(i.append(n),this._target=i.children().last()):(Object(r.a)(t[s]).before(n),this._target=Object(r.a)(i.children()[s]))}else i.append(n),this._target=i.children().last();return this._afterRender(),this.opts.requiresData&&Object(a.isEmpty)(this.data)&&this.hide(),!!this._target&&(this._lastSize=this.size(),this._opts.ui&&this.setUI(this._opts.ui),this.opts.className&&this.$el.addClass(Object(o.prefixCSSClassName)(this.opts.className)),this._onAddedToDOM(),this._layout(),this._setupEvents(),this._afterEvents(),this.trigger("render"),Object(r.a)(window).on("resize",(()=>{this._onResize()})),!0)}setIndex(t){const e=this.$el.parent(),s=this.index();if(e&&s!==t){this.$el.remove();const s=e.children(),i=Math.min(t,s.length)-1;Object(r.a)(s[i]).after(this.$el),this._target=Object(r.a)(e.children()[t])}}index(){const t=this.$el.parent();if(t){return t.children().indexOf(this.$el[0])}return-1}remove(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$el&&this.$el.remove(),t&&this.offAll()}show(){this.$el&&(this.$el.show(),this.trigger("show"))}hide(){this.$el&&(this.$el.hide(),this.trigger("hide"))}parent(){if(this.$el){const t=this.$el.parent();if(t&&t.length>0&&null!==t[0])return t}return null}size(){return this.$el?{width:this.$el.outerWidth(!0),height:this.$el.outerHeight(!0)}:{width:0,height:0}}setSize(t,e){if(0===t&&0===e)return;const s=this.size();t>0&&(s.width=t),e>0&&(s.height=e),this.$el.css({width:"".concat(s.width,"px"),height:"".concat(s.height,"px")}),this._onResize()}layout(){this._layout()}bounds(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.$el?this.$el.bounds(t,e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}update(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t&&(t=this._onData(t),Object(a.isArray)(t)?this._data=Object(a.cloneDeep)(t):this._data=Object.assign(Object.assign({},this._data),Object(a.cloneDeep)(t))),this.$el&&e){const e=this._render(this._data);this._target=this.$el.replace(e),this._afterRender(),this.trigger("render"),this.opts.requiresData&&Object(a.isEmpty)(t)?this.hide():this.show()}}setUI(t){this.$el&&Object.keys(t).forEach((e=>{try{const s=Object(r.a)(t[e],this.$el);s&&s.length>0?this._ui[e]=s:this._ui[e]=null}catch(t){console.warn(t)}}))}moveTo(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},s=t.x,i=t.y;s+=e.x,i+=e.y,this.$el.css({left:"".concat(s,"px"),top:"".concat(i,"px")})}pinTo(t,e){const s=this.parent();if(t=t.replace(/-/,""),e=Object(a.extend)({x:0,y:0},e),this.$el.addClass("awxjs__app__view__pinned-".concat(t)),s){const i=s.bounds(),n=Object(c.b)(t,this.size(),{width:i.width,height:i.height},e),a=/right/.test(t)?"right":"left",o=/bottom/.test(t)?"bottom":"top",r=window.getComputedStyle(this.$el[0]);if(r&&"none"!==r.transform){const t=r.transform.replace(/\(.+$/,""),e=r.transform.replace(/[^0-9,-]/g,"").split(",").map((t=>parseFloat(t)));if("matrix"===t){const[t,s,i,a,o,c]=e;n.x-=o/2,n.y-=c/2}}"right"===a&&(n.x=-1*e.x),"bottom"===o&&(n.y=-1*e.y);const l={};l[a]="".concat(n.x,"px"),l[o]="".concat(n.y,"px"),this.$el.css(l)}}_render(t){return"<div></div>"}_layout(){}_onData(t){return t}_beforeRender(){}_afterRender(){this._renderCount+=1}_setupEvents(){}_afterEvents(){}_onAddedToDOM(){}_onResize(){this._shouldLayout()&&this._layout(),this._lastSize=this.size()}_shouldLayout(){const t=this.size();return t.width!==this._lastSize.width||t.height!==this._lastSize.height}}var h=l;var d=class extends h{get state(){return Object(a.cloneDeep)(this._state)}getState(t){return Object(a.get)(this.state,t)}setState(t){this._state=Object(a.extend)(this._state,t)}};var u=class extends d{constructor(t){(t=Object(a.extend)({enabled:!0,toggleable:!1,ui:{container:".awxjs__app__ui-panel-container",toolbar:".awxjs__app__ui-panel-toolbar",content:".awxjs__app__ui-panel-content",toggle:".awxjs__app__ui-panel-toggle",close:".awxjs__app__ui-panel-close"}},t)).className=Object(a.isset)(t.className)?"app__ui-panel ".concat(t.className):"app__ui-panel",super(t),this._bounds={},this.setState({visible:!0!==this.opts.toggleable,maxContentSize:{width:1e4,height:1e4}})}get content(){return this.ui.content}get toolbar(){return this.ui.toolbar}get visible(){const{visible:t}=this.state;return t}open(){!1!==this.opts.toggleable&&(this.setState({visible:!0}),this._updateSize(),this.$el.addClass("awxjs__app__ui-panel-toggleable-open"))}close(){!1!==this.opts.toggleable&&(this.setState({visible:!1}),this._updateSize(),this.$el.removeClass("awxjs__app__ui-panel-toggleable-open"))}toggle(){this.visible?this.close():this.open()}getContentContainer(){return this.ui.content}size(){if(!this.$el)return{width:0,height:0};let t=this.$el;return this.opts.toggleable&&this.ui.toggle?t=this.ui.toggle:this.ui.content&&(t=this.ui.content),{width:t.outerWidth(!0),height:t.outerHeight(!0)}}contentSize(){const t={width:0,height:0},e=this.getContentContainer(),s=(e[0].style.height,e[0].style.width);let i=Object(o.prefixCSSClassName)(this.opts.className);i="awxjs__app__component ".concat(i);let n=Object(r.a)('\n\t\t\t<div id="awxjs__panel-calc" class="'.concat(i,'" style="display:inline-block;visibility:none;left:-10000px;width:').concat(s,'">\n\t\t\t\t<div class="awxjs__app__ui-panel-content">\n\t\t\t\t\t').concat(e.html(),"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"));Object(r.a)("body").append(n),n=Object(r.a)("#awxjs__panel-calc"),t.width=n.outerWidth(!0),t.height=n.outerHeight(!0);const a={width:0,height:0};return n.children().forEach((e=>{if("absolute"!==window.getComputedStyle(e).position){const s=Object(r.a)(e);a.width=Math.max(t.width,s.outerWidth(!0)),a.height+=s.outerHeight(!0)}})),t.height=Math.max(t.height,a.height),t.height=Math.min(t.height,this.state.maxContentSize.height),n.remove(),t}setContentSize(t){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.height-=this.toolbar.outerHeight()),this.ui.content.css({"max-height":"".concat(t.height,"px"),width:"".concat(t.width,"px"),overflow:"auto"})}setMaxContentSize(t){this.setState({maxContentSize:t});const e=this.contentSize();this.setContentSize(e,!1),this._updateSize()}_updateSize(){if(!this.opts.toggleable)return;if(!this.ui.close)return;const t={width:0,height:0};if(this.visible&&this._bounds.content){let{height:e,width:s}=this.contentSize();this.ui.content.padding();e+=this.ui.toolbar.outerHeight(!0),t.width=s,t.height=e}else if(!this.visible&&this._bounds.toggle){const{height:e,width:s}=this._bounds.toggle;t.width=s,t.height=e}this.ui.container.css({"max-height":"".concat(t.height,"px"),"max-width":"".concat(t.width,"px")}),this.$el.css({"min-height":"".concat(t.height,"px"),"min-width":"".concat(t.width,"px")})}_render(){return'\n\t\t\t<div class="awxjs__app__ui-panel">\n\t\t\t\t<div class="awxjs__app__ui-panel-container">\n\t\t\t\t\t<div class="awxjs__app__ui-panel-toolbar">\n\t\t\t\t\t\t'.concat(this.opts.title?'<div class="awxjs__app__ui-panel-title">'.concat(this.opts.title,"</div>"):"",'\n\t\t\t\t\t\t<button class="awxjs__app__ui-panel-close">\n\t\t\t\t\t\t\t<svg version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t\t<path d="m22.699 77.301c0.80078 0.80078 1.8008 1.1992 2.8008 1.1992s2-0.39844 2.8008-1.1992l21.699-21.602 21.699 21.699c0.80078 0.80078 1.8008 1.1992 2.8008 1.1992s2-0.39844 2.8008-1.1992c1.6016-1.6016 1.6016-4.1016 0-5.6992l-21.602-21.699 21.699-21.699c1.6016-1.6016 1.6016-4.1016 0-5.6992-1.6016-1.6016-4.1016-1.6016-5.6992 0l-21.699 21.699-21.699-21.602c-1.6016-1.6016-4.1016-1.6016-5.6992 0-1.6016 1.6016-1.6016 4.1016 0 5.6992l21.699 21.602-21.602 21.699c-1.5977 1.5-1.5977 4.1016 0 5.6016z"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="awxjs__app__ui-panel-content"></div>\n\t\t\t\t\t<div class="awxjs__app__ui-panel-toggle">').concat(this.opts.icon,"</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")}_layout(){if(super._layout(),this.ui.content){const t=this.contentSize();if(t.width>0&&t.height>0){const e=this.ui.content.padding();this._bounds.content=Object(a.extend)(this.ui.content.bounds(),{height:t.height+e.top+e.bottom,width:t.width+e.left+e.right})}}this.ui.toggle&&(this._bounds.toggle=this.ui.toggle.bounds()),this._updateSize()}_afterRender(){super._afterRender(),this.opts.toggleable&&this.$el.addClass("awxjs__app__ui-panel-toggleable")}_onAddedToDOM(){super._onAddedToDOM(),this.opts.toggleable&&this.close()}_setupEvents(){this.opts.toggleable&&(this.ui.toggle.on("click",(()=>{this.open()})),this.ui.close.on("click",(()=>{this.close()})))}},p=s("fnc3");class _ extends i.a{constructor(){super(),this.keyHandler=t=>{this.listenForKeys(t)}}start(){Object(r.a)(document).on("keyup keypress",this.keyHandler)}stop(){Object(r.a)(document).off("keyup keypress",this.keyHandler)}listenForKeys(t){const e=t.type,s=(t.key||"").toLowerCase();this.trigger(e,{event:e,key:s}),"keyup"===e&&("escape"===s||"esc"===s||27===t.keyCode?this.trigger("escape"):"enter"===s&&this.trigger("enter"))}}var g=_;const m=t=>{const e=t?t.document:null,s=e?e.defaultView||e.parentWindow:null;return!!(t&&"object"==typeof t&&"object"==typeof t.window&&t.window===t&&t.setTimeout&&t.alert&&Object(a.isset)(e)&&"object"==typeof e&&Object(a.isset)(s)&&"object"==typeof s&&s===t)},v=(t,e)=>{const s=m(t),i=s?t.document:t.ownerDocument||t,n=i.documentElement,a=m(e)?e:i.defaultView||window;t===i&&(t=n),e=e&&e!==i?e:n;const o=(a.pageYOffset||n.scrollTop)-n.clientTop,c=(a.pageXOffset||n.scrollLeft)-n.clientLeft,r={top:0,left:0,right:0,bottom:0,width:0,height:0};if(s)r.width=a.innerWidth||n.clientWidth,r.height=a.innerHeight||n.clientHeight,r.right=r.width,r.bottom=r.height;else if(t===n)r.top=-o,r.left=-c,r.width=Math.max(n.clientWidth,n.scrollWidth),r.height=Math.max(n.clientHeight,n.scrollHeight),r.right=r.width-c,r.bottom=r.height-o;else{if(!n.contains(t)||!t.getBoundingClientRect)return null;{const e=t.getBoundingClientRect();Object.keys(r).forEach((t=>{r[t]=e[t]})),r.width=r.right-r.left,r.height=r.bottom-r.top}}if(e===a)return r;if(r.top+=o,r.left+=c,r.right+=c,r.bottom+=o,e===n)return r;const l=v(e);return r.left-=l.left,r.right-=l.left,r.top-=l.top,r.bottom-=l.top,r};let b;class f extends i.a{get $el(){return this._element}get $content(){return Object(r.a)(".awxjs__ui-tooltip-content",this.$el)}get $close(){return Object(r.a)(".awxjs__ui-tooltip-close",this.$el)}get $target(){return this._target}get size(){return this._size}get visible(){return!1===this._hidden}constructor(t,e){super(),this._size={width:0,height:0},this._observers={mutation:void 0,key:new g},this._reposition=()=>{const t=window.requestAnimationFrame||(t=>setTimeout(t,17));(()=>{t((()=>{this.position()}))})()},this._opts=Object(a.extend)({place:"top",effect:"slide",spacing:5,showClose:!1},e),this._hidden=!0,this._element=Object(r.a)('<div class="awxjs__ui-tooltip"></div>');const s=this._opts.showClose?'\n\t\t\t<button class="awxjs__ui-btn-icon-sm awxjs__ui-tooltip-close">\n\t\t\t\t'.concat('\n\t<svg width="100pt" height="100pt" version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n\t\t<path d="m22.699 77.301c0.80078 0.80078 1.8008 1.1992 2.8008 1.1992s2-0.39844 2.8008-1.1992l21.699-21.602 21.699 21.699c0.80078 0.80078 1.8008 1.1992 2.8008 1.1992s2-0.39844 2.8008-1.1992c1.6016-1.6016 1.6016-4.1016 0-5.6992l-21.602-21.699 21.699-21.699c1.6016-1.6016 1.6016-4.1016 0-5.6992-1.6016-1.6016-4.1016-1.6016-5.6992 0l-21.699 21.699-21.699-21.602c-1.6016-1.6016-4.1016-1.6016-5.6992 0-1.6016 1.6016-1.6016 4.1016 0 5.6992l21.699 21.602-21.602 21.699c-1.5977 1.5-1.5977 4.1016 0 5.6016z"/>\n\t</svg>\n',"\n\t\t\t</button>\n\t\t"):"";this.$el.html("\n\t\t\t".concat(s,'\n\t\t\t<div class="awxjs__ui-tooltip-content"></div>\n\t\t')),this._opts.className&&this.$el.addClass(this._opts.className),this._opts.effect&&this.$el.addClass(this._opts.effect),t&&this.setContent(t),this._observers.key.on("escape",(()=>{this.hide()})),this._observers.mutation=new MutationObserver(((t,e)=>{if(t&&this._target.length>0){const e=this._target[0];t.forEach((t=>{t.removedNodes&&t.removedNodes.length>0&&!1===document.body.contains(e)&&this.destroy()}))}}))}show(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return clearTimeout(this._hideTimeout),b&&t&&(b.hide(),b=this),this._target&&this.position(this._target),this._hidden&&(this._hidden=!1,Object(r.a)("body").append(this.$el)),this._observers.key.start(),this.$close.on("click",this.hide.bind(this)),Object(r.a)(window).on("scroll resize",this._reposition),setTimeout((()=>{this.$el.addClass("in")}),100),this}hide(){if(this._hidden)return this;this._observers.key.stop(),this.$close.off("click",this.hide.bind(this)),this.$el.removeClass("in"),Object(r.a)(window).off("scroll resize",this._reposition),clearTimeout(this._hideTimeout);const t=(t=>{const e=window.getComputedStyle(t),s=String(e.getPropertyValue("transition-duration")||e.getPropertyValue("-webkit-transition-duration")).match(/([0-9.]+)([ms]{1,2})/);let i=0;return s&&(i=Number(s[1]),"s"===s[2]&&(i*=1e3)),i||0})(this.$el[0]);return this._hideTimeout=setTimeout((()=>{this.$el.remove()}),t),this._hidden=!0,this}toggle(){return this.visible?this.hide():this.show()}setContent(t){return Object(a.isString)(t)?this.$content.html(t):this.$content.empty().append(t),this._updateSize(),this}attachTo(t){return this._target=t,t&&(this._observers.mutation.disconnect(),this._observers.mutation.observe(document,{childList:!0,subtree:!0})),this._hidden||this.position(),this}detach(){return this.hide(),this._target=null,this._observers.mutation.disconnect(),this}destroy(){this.detach(),this.$el.remove()}position(t,e){t=t||this._target,!Object(a.isset)(t)&&this._p?(t=this._p[0],e=this._p[1]):(this._p=[],t&&this._p.push(t),e&&this._p.push(e)),t=t[0]||t;const s=Object(a.isNumber)(t)?{left:t||0,right:t||0,top:e||0,bottom:e||0,width:0,height:0}:v(t);if(!s)return this;const i=this._opts.spacing||0,n=this._pickPlace(s);n!==this._lastPlace&&(this._lastPlace&&this.$el.removeClass(this._lastPlace),this.$el.addClass(n),this._lastPlace=n);const o=this._lastPlace,{width:c,height:r}=this.size;let l=0,h=0;return/^top/.test(o)?l=s.top-r-i:/^bottom/.test(o)?l=s.bottom+i:/^left/.test(o)?h=s.left-c-i:/^right/.test(o)&&(h=s.right+i),/-left$/.test(o)?h=s.right-c:/-right$/.test(o)?h=s.left:/-top$/.test(o)?l=s.bottom-r:/-bottom$/.test(o)&&(l=s.top),"left"===o||"right"===o?l=s.top+s.height/2-r/2:"top"!==o&&"bottom"!==o||(h=s.left+s.width/2-c/2),this.$el.css({top:"".concat(Math.round(l),"px"),left:"".concat(Math.round(h),"px")}),this}_updateSize(){this._hidden&&(this.$el.css("visibility","hidden"),Object(r.a)("body").append(this.$el)),this._size={width:this.$el.outerWidth(!0),height:this.$el.outerHeight(!0)},this._hidden?(this.$el.remove(),this.$el.css("visibility","")):this.position()}_pickPlace(t){const e=v(window),s=this._opts.place.split("-"),i=this._opts.spacing||0;if(-1!==["top","bottom"].indexOf(s[0]))switch(t.top-this.size.height-i<=e.top?s[0]="bottom":t.bottom+this.size.height+i>=e.bottom&&(s[0]="top"),s[1]){case"left":t.right-this.size.width<=e.left&&(s[1]="right");break;case"right":t.left+this.size.width>=e.right&&(s[1]="left");break;default:t.left+t.width/2+this.size.width/2>=e.right?s[1]="left":t.right-t.width/2-this.size.width/2<=e.left&&(s[1]="right")}else switch(t.left-this.size.width-i<=e.left?s[0]="right":t.right+this.size.width+i>=e.right&&(s[0]="left"),s[1]){case"top":t.bottom-this.size.height<=e.top&&(s[1]="bottom");break;case"bottom":t.top+this.size.height>=e.bottom&&(s[1]="top");break;default:t.top+t.height/2+this.size.height/2>=e.bottom?s[1]="top":t.bottom-t.height/2-this.size.height/2<=e.top&&(s[1]="bottom")}return s.join("-")}}var w=f;var j=class extends d{constructor(t){super(Object(a.extend)({},t,{className:Object(a.get)(t,"className")?"ui-slider-range-handle ".concat(t.className):"ui-slider-range-handle"})),this._handleMouseDown=t=>{this.focus()},this._handleMouseUp=t=>{document.activeElement===this.$el[0]&&this.setClickFocus(!0)},this._handleBlur=t=>{this.setClickFocus(!1)},this.initialize(),this.$el.on("mousedown",this._handleMouseDown),this.$el.on("blur",this._handleBlur),Object(r.a)(document).on("mouseup",this._handleMouseUp)}initialize(t){super.initialize(t),this.updatePosition(0,this.opts)}setClickFocus(t){this.setState({clickFocused:t}),t?this.$el.addClass("awxjs__ui-slider-range-handle-click-focused"):this.$el.removeClass("awxjs__ui-slider-range-handle-click-focused")}clickFocus(){this.setClickFocus(!0),this.focus()}focus(){this.$el[0].focus()}blur(){this.$el[0].blur()}updatePosition(t,e){this.$el.css("left","".concat(t,"%")),e&&(this.$el.attr("aria-valuemin",e.values.min),this.$el.attr("aria-valuemax",e.values.max),this.$el.attr("aria-valuenow",e.values.current),this.$el.attr("aria-disabled",!0===e.disabled))}_render(t){return'\n\t\t\t<div class="awxjs__ui-slider-range-handle"></div>\n\t\t'}_afterRender(){this.$el.attr("role","slider"),Object(a.isset)(this.opts.tabindex)&&this.$el.attr("tabindex",this.opts.tabindex)}};const O=(t,e,s,i,n)=>{const o=((t,e,s,i,n)=>{const a=Object.keys(e).map(parseFloat);if(null!==s){const e=Math.floor((n-i)/s),o=Math.min((t-i)/s,e),c=Math.round(o)*s+i;a.push(c)}const o=a.map((e=>Math.abs(t-e)));return a[o.indexOf(Math.min(...o))]})(t,e,s,i,n),c=Number.isFinite(o)?o:0;return Object(a.isset)(s)?parseFloat(c.toFixed((t=>{const e=t.toString();let s=0;return e.indexOf(".")>=0&&(s=e.length-e.indexOf(".")-1),s})(s))):c},x=t=>{if(t.touches){const e=t;if(e.touches.length>0)return e.touches[0]}return t};var y=class extends d{constructor(t){var e;if(super(Object(a.extend)({range:{min:0,max:100},count:1,step:10,marks:{},marksEvery:void 0,dots:!0,disabled:!1,tooltip:!0,ui:{inner:".awxjs__ui-slider-range-inner",track:".awxjs__ui-slider-range-track",rail:".awxjs__ui-slider-range-rail",steps:".awxjs__ui-slider-range-steps",marks:".awxjs__ui-slider-range-marks",handles:".awxjs__ui-slider-range-handle"}},t,{className:Object(a.get)(t,"className")?"ui-slider-range ".concat(t.className):"ui-slider-range"})),e=this,this._handles=[],this._onBoundsChange=t=>{const{bounds:e}=t,s=e.map((t=>this._offsetForValue(t)));Object(a.isset)(this._handles)&&this._handles.length<=s.length&&s.forEach(((t,e)=>{const i=this._handles[e];i&&i.updatePosition(s[e])})),this._onChange(t)},this._onChange=t=>{if(Object(a.isEmpty)(this._handles))return;const{bounds:e,handle:s}=t,i=e.map((t=>this._offsetForValue(t))),n=this._handles[s];if(n&&(n.updatePosition(i[s]),this._updateTooltip(e[s],s)),1===i.length)this.ui.track.css({left:"0%",width:"".concat(i[0],"%")});else{const t=i[i.length-1]-i[0];this.ui.track.css({left:"".concat(i[0],"%"),width:"".concat(t,"%")})}this.setState({bounds:e});const o=this._getLowerBound(),c=this._getUpperBound();this.ui.steps.children().forEach((t=>{const e=Object(r.a)(t),s=parseFloat(e.data("key"));s===c||s<=c&&s>=o?e.addClass("awxjs__ui-slider-range-dot-active"):e.removeClass("awxjs__ui-slider-range-dot-active")})),this.ui.marks.children().forEach((t=>{const e=Object(r.a)(t),s=parseFloat(e.data("key"));s===c||s<=c&&s>=o?e.addClass("awxjs__ui-slider-range-mark-text-active"):e.removeClass("awxjs__ui-slider-range-mark-text-active")})),this.trigger("change",{value:Object.assign({},t.bounds)})},this._onStart=t=>{const e=this.value,s=this._valueAtPosition(t),i=this._getClosestBound(s),n=this._getBoundNeedMoving(s,i);this.trigger("change:start",{value:this.value}),this.setState({handle:n,recent:n});if(s===e[n])return;const a=[...this.state.bounds];a[n]=s,this._lastMovedHandle=n,this._onChange({bounds:a,handle:n})},this._onEnd=function(){const{handle:t}=e.state;e._removeDocumentEvents(),Object(a.isset)(t),e.setState({handle:null}),e.trigger("change:end",{value:e.value})},this._onMove=(t,e)=>{const{bounds:s,handle:i}=this.state,n=this._valueAtPosition(e);n!==s[i]&&this._moveTo(n)},this._onKeyboard=t=>{},this._onMouseDown=t=>{const e=t.target,s=this._handles.map((t=>t.$el[0]));if(-1===s.indexOf(e))return;t.preventDefault();let i=x(t).pageX;if(!1===((t,e)=>{try{return Object(a.isArray)(e)?e.some((e=>t.target===e)):Object.keys(e).some((s=>t.target===e[s]))}catch(t){return!1}})(t,this._handles.map((t=>t.$el))))this._dragOffset=0;else{const t=(t=>{const e=Object(r.a)(t).bounds();return window.pageXOffset+e.left+.5*e.width})(e);this._dragOffset=i-t,i=t}this._removeDocumentEvents(),this._onStart(i),this._addDocumentEvents();const{bounds:n,handle:o}=this.state;this._updateTooltip(n[o],o),this._tooltip.show(!1)},this._onMouseUp=t=>{this._tooltip.hide(),this._onEnd()},this._onMouseMove=t=>{if(!this.ui.rail)return void this._onEnd();const e=x(t).pageX;this._onMove(t,e-this._dragOffset)},Object(a.isArray)(this.opts.value)){const[t,e]=this.opts.value,s=this.opts.step;if(t%s!=0){const i="[Aeris] The 'value' property passed to the range configuration\n\t\t\t\t\t([".concat(t,", ").concat(e,"]) does not contain from/to values equally divisible by the\n\t\t\t\t\tstep value (").concat(s,", which may affect the rendered step range in the\n\t\t\t\t\tcontrol.");console.warn(i.replace(/\s+/g," "))}}const s=(this.opts.value||Array(...Array(this.opts.count+1)).map((()=>this.opts.range.min))).map(((t,e)=>this._trimAlignValue(t,e)));this.setState({bounds:s}),this._tooltip=new w,this.update()}get value(){const{bounds:t}=this.state;return t}set value(t){const e=t.map(((t,e)=>this._trimAlignValue(t,e)));this.setState({bounds:e}),this._onBoundsChange(this.state)}_render(){const{bounds:t}=this.state;if(!t)return null;const{range:{min:e,max:s},marks:i,marksEvery:n,step:o}=this.opts,c=s-e,r=this.opts.dots&&o>1,l=Object.keys(i).map(parseFloat).filter((t=>t>=e&&t<=s)).sort(((t,e)=>t-e));if(r)for(let t=e;t<=s;t+=o)-1===l.indexOf(t)&&l.push(t);const h=i||{};if(Object(a.isset)(n)){let t=1,i=!1;if(Object(a.isString)(n)){const e="".concat(n);i=/^%\s*\d+$/.test(e),t=parseInt(e.replace(/\D/,""),10)}else t=parseInt("".concat(n),10);let c=e,r=0;for(;c<=s;){if(i?c%t==0:r%t==0){const t="".concat(c);if(!Object(a.isset)(h[c])){const e=this.opts.marksFormatter;h[t]=Object(a.isset)(e)&&Object(a.isFunction)(e)?e(c):t}}c+=o,r+=1}Object(a.set)(this.opts,"marks",h)}const d=Object.keys(h).map(parseFloat).filter((t=>t>=e&&t<=s)).sort(((t,e)=>t-e)).map((t=>{const s=h[t];if(Object(a.isEmpty)(s))return null;const i="".concat(Math.abs(t-e)/c*100,"%");return'<div\n\t\t\t\t\tclass="awxjs__ui-slider-range-mark-text"\n\t\t\t\t\tstyle="left:'.concat(i,';transform:translateX(-50%);msTransform:translateX(-50%);"\n\t\t\t\t\tdata-key="').concat(t,'"\n\t\t\t\t>').concat(s,"</div>")})),u=l.map((t=>{const s="".concat(Math.abs(t-e)/c*100,"%");return'<div\n\t\t\t\tclass="awxjs__ui-slider-range-dot"\n\t\t\t\tstyle="left:'.concat(s,';"\n\t\t\t\tdata-key="').concat(t,'"\n\t\t\t></div>')}));return this._handles=t.map(((t,i)=>new j({values:{min:e,max:s,current:t}}))),'\n\t\t\t<div class="awxjs__ui-slider-range">\n\t\t\t\t'.concat(this.opts.title?'<div class="awxjs__ui-slider-range-title">'.concat(this.opts.title,"</div>"):"",'\n\t\t\t\t<div class="awxjs__ui-slider-range-inner">\n\t\t\t\t\t<div class="awxjs__ui-slider-range-rail"></div>\n\t\t\t\t\t<div class="awxjs__ui-slider-range-track"></div>\n\t\t\t\t\t<div class="awxjs__ui-slider-range-steps">').concat(u.join(""),'</div>\n\t\t\t\t\t<div class="awxjs__ui-slider-range-marks">').concat(d.join(""),"</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")}_afterRender(){const{bounds:t}=this.state,e=t.map((t=>this._offsetForValue(t)));this.opts.ui&&(this.setUI(this.opts.ui),this.ui.marks.children().length>0&&this.$el.addClass("awxjs__ui-slider-range-with-marks"),this._setupEvents(),this.opts.width>0&&this.ui.inner.width(this.opts.width),this._handles.forEach(((t,s)=>{t.addTo(this.ui.inner),t.updatePosition(e[s])}))),this._onChange(this.state)}_setupEvents(){super._setupEvents(),this.$el.on("mousedown touchstart",this._onMouseDown)}_getClosestBound(t){const{bounds:e}=this.state;let s=0;for(let i=1;i<e.length-1;i+=1)t>e[i]&&(s=i);return Math.abs(e[s+1]-t)<Math.abs(e[s]-t)&&(s+=1),s}_getBoundNeedMoving(t,e){const{bounds:s,recent:i}=this.state;let n=e;const a=s[e+1]===s[e];return a&&s[i]===s[e]&&(n=i),a&&t!==s[e+1]&&(n=t<s[e+1]?e:e+1),n}_getLowerBound(){const{bounds:t}=this.state,{range:{min:e,max:s}}=this.opts;return 1===t.length?e:t[0]}_getUpperBound(){const{bounds:t}=this.state;return t[t.length-1]}_getPoints(){const{marks:t,range:{min:e,max:s},step:i}=this.opts,n=this._points;if(!n||n.marks!==t||n.step!==i){const n=Object.assign({},t);if(Object(a.isset)(i))for(let t=e;t<=s;t+=i)n[t]=t;const o=Object.keys(n).map(parseFloat);o.sort(((t,e)=>t-e)),this._points={marks:t,step:i,points:o}}return this._points.points}_moveTo(t){const{handle:e,recent:s,bounds:i}=this.state,n=Object(a.isset)(e)?e:s,o=[...i];o[n]=t;const c=n;this._onChange({handle:c,bounds:o})}_trimAlignValue(t,e){const{range:{min:s,max:i}}=this.opts,n=((t,e,s)=>t<=e?e:t>=s?s:t)(t,s,i),a=this._ensureValueNotConflict(n,e);return O(a,this.opts.marks,this.opts.step,this.opts.range.min,this.opts.range.max)}_ensureValueNotConflict(t,e){const{bounds:s,handle:i}=this.state;if(e=Object(a.isset)(e)?e:i,Object(a.isset)(e)&&Object(a.isset)(s)){if(e>0&&t<=s[e-1])return s[e-1];if(e<s.length-1&&t>=s[e+1])return s[e+1]}return t}_valueAtPosition(t){const e=t-(this.ui.rail.bounds().left+window.pageXOffset);return this._trimAlignValue(this._valueAtOffset(e))}_valueAtOffset(t){const{range:{min:e,max:s}}=this.opts,i=this.ui.rail?this.ui.rail.bounds().width:0;return Math.abs(Math.max(t,0)/i)*(s-e)+e}_offsetForValue(t){const{range:{min:e,max:s}}=this.opts;return 100*((t-e)/(s-e))}_updateTooltip(t,e){if(Object(a.isEmpty)(this._handles))return;const s=this._handles[e];let i=t.toString();Object(a.isFunction)(this.opts.tooltip)&&(i=this.opts.tooltip(t)),this._tooltip.setContent(i).position(s.$el)}_addDocumentEvents(){Object(r.a)(document).on("mousemove touchmove",this._onMouseMove).on("mouseup touchend",this._onMouseUp)}_removeDocumentEvents(){Object(r.a)(document).off("mousemove touchmove",this._onMouseMove).off("mouseup touchend",this._onMouseUp)}},S=function(t,e){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(s[i[n]]=t[i[n]])}return s};const k={opacity:{type:"slider",label:"Opacity",options:{value:[100],range:{min:0,max:100},marksEvery:"% 50",marksFormatter:t=>"".concat(t,"%"),step:5,dots:!1,tooltip:t=>"".concat(t,"%")}}};var M=class extends d{constructor(t){super(t),this.initialize()}_render(t){return'\n\t\t\t<div class="awxjs__ui-layer-controls"></div>\n\t\t'}_setupEvents(){super._setupEvents();(this.opts.controls||[]).map((t=>{const{type:e}=t,s=S(t,["type"]);return Object.keys(k).indexOf(e)>-1?Object(a.extend)({},k[e],s):t})).forEach((t=>{let{type:e,id:s,label:i,options:n}=t;const o=s||i.replace(/\s+/,"-").toLowerCase();if("slider"===e){const t=new y(Object(a.extend)(Object.assign(Object.assign({},n),{title:i,width:150}),{}));t.addTo(this.$el),t.on("change",(t=>{let e=Object(a.get)(t,"data.value");e&&Object(a.isset)(e[0])&&(e=e[0]),this.trigger("change",{id:o,value:e})}))}}))}};let C=null;var E=class extends h{constructor(t){var e;super(Object(a.extend)({controls:[{close:!0,activity:!1,settings:void 0}]},t,{ui:{close:".awxjs__ui-btn-close",settings:".awxjs__ui-btn-settings",controls:".awxjs__ui-btn-controls"}})),this._handleWindowClick=t=>{const e=Object(r.a)(t.target),s=this._popover.$el;s!==e&&!1===s.contains(e)&&(this._hidePopover(),window.removeEventListener("click",this._handleWindowClick))},(null===(e=t.controls)||void 0===e?void 0:e.onChange)&&(this._onChange=t.controls.onChange);this.opts.controls.activity&&(this._indicator=new p.a({size:24,strokeWidth:2}))}setLoading(t){this._indicator&&(t?this._indicator.startAnimating():this._indicator.stopAnimating()),this.ui.close.css("opacity",t?0:1),this.ui.settings&&this.ui.settings.css("opacity",t?0:1)}addToButton(t){t.ui.target&&(this.remove(),this.addTo(t.$el),t.on("select",(()=>{this.ui.settings&&this.ui.settings.show()})).on("deselect",(()=>{this.ui.close&&this.ui.close.css("opacity",0),this.ui.settings&&this.ui.settings.hide(),this._popover&&this._hidePopover()})))}_render(){const t=this.opts.controls;let e="";return t.close&&(e+='\n\t\t\t\t<div class="awxjs__ui-btn-action awxjs__ui-btn-close" title="Close">\n\t\t\t\t\t<svg width="100pt" height="100pt" version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t<path d="m22.699 77.301c0.80078 0.80078 1.8008 1.1992 2.8008 1.1992s2-0.39844 2.8008-1.1992l21.699-21.602 21.699 21.699c0.80078 0.80078 1.8008 1.1992 2.8008 1.1992s2-0.39844 2.8008-1.1992c1.6016-1.6016 1.6016-4.1016 0-5.6992l-21.602-21.699 21.699-21.699c1.6016-1.6016 1.6016-4.1016 0-5.6992-1.6016-1.6016-4.1016-1.6016-5.6992 0l-21.699 21.699-21.699-21.602c-1.6016-1.6016-4.1016-1.6016-5.6992 0-1.6016 1.6016-1.6016 4.1016 0 5.6992l21.699 21.602-21.602 21.699c-1.5977 1.5-1.5977 4.1016 0 5.6016z"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t'),t.settings&&(e+='\n\t\t\t\t<div class="awxjs__ui-btn-action awxjs__ui-btn-settings" title="Settings">\n\t\t\t\t\t<svg version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t<path d="m94.801 40.801-10.602-1.8008c-0.60156-1.8984-1.3984-3.6992-2.3008-5.5l6.1992-8.6992c0.89844-1.3008 0.80078-3.1016-0.30078-4.1992l-8.5-8.5c-1.1016-1.1016-2.8984-1.3008-4.1992-0.30078l-8.6992 6.1992c-1.6992-0.89844-3.6016-1.6992-5.5-2.3008l-1.6992-10.5c-0.30078-1.6016-1.6016-2.6992-3.1992-2.6992h-12c-1.6016 0-2.8984 1.1016-3.1992 2.6992l-1.8008 10.602c-1.8984 0.60156-3.6992 1.3984-5.5 2.3008l-8.6992-6.1992c-1.3008-0.89844-3.1016-0.80078-4.1992 0.30078l-8.5 8.5c-1.1016 1.1016-1.3008 2.8984-0.30078 4.1992l6.1992 8.6992c-0.89844 1.6992-1.6992 3.6016-2.3008 5.5l-10.5 1.6992c-1.6016 0.30078-2.6992 1.6016-2.6992 3.1992v12c0 1.6016 1.1016 2.8984 2.6992 3.1992l10.602 1.8008c0.60156 1.8984 1.3984 3.6992 2.3008 5.5l-6.1992 8.6992c-0.89844 1.3008-0.80078 3.1016 0.30078 4.1992l8.5 8.5c1.1016 1.1016 2.8984 1.3008 4.1992 0.30078l8.6992-6.1992c1.6992 0.89844 3.6016 1.6992 5.5 2.3008l1.8008 10.602c0.30078 1.6016 1.6016 2.6992 3.1992 2.6992h12c1.6016 0 2.8984-1.1016 3.1992-2.6992l1.6992-10.703c1.8984-0.60156 3.6992-1.3984 5.5-2.3008l8.6992 6.1992c1.3008 0.89844 3.1016 0.80078 4.1992-0.30078l8.5-8.5c1.1016-1.1016 1.3008-2.8984 0.30078-4.1992l-6.1992-8.6992c0.89844-1.6992 1.6992-3.6016 2.3008-5.5l10.602-1.8008c1.6016-0.30078 2.6992-1.6016 2.6992-3.1992v-11.898c-0.10156-1.6016-1.2031-2.8984-2.8008-3.1992zm-44.801 26.301c-9.5 0-17.102-7.6992-17.102-17.102 0-9.5 7.6992-17.102 17.102-17.102 9.3984 0 17.102 7.6016 17.102 17.102s-7.6016 17.102-17.102 17.102z"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t'),""!==e&&(e='<div class="awxjs__ui-btn-controls">'.concat(e,"</div>")),e}_setupEvents(){super._setupEvents();const t=this.opts.controls;this._indicator&&this._indicator.appendTo(this.$el),t.settings&&this.ui.settings&&this.ui.settings.on("click",(e=>{if(e.preventDefault(),e.stopPropagation(),!this._popover){const e=new M({controls:t.settings});e.on("change",(t=>{const e=Object.assign({},t.data);this.trigger("change",e),this._onChange&&this._onChange(e)}));const s=new w(e.$el,{place:"left",className:"awxjs__ui-layer-controls-popover",showClose:!0});e.addTo(s.$el),s.attachTo(this.parent()),s.setContent(e.$el),this._popover=s,this._controls=e}this._popover.visible?this._hidePopover():this._showPopover(),window.addEventListener("click",this._handleWindowClick)}))}_showPopover(){C&&C.hide(),this._popover.show(),C=this._popover}_hidePopover(){this._popover.hide(),C=null}};const T=t=>(t||"").replace(/\:.+$/,"").replace(/[^a-zA-Z0-9_]/g,"-").replace(/-+/g,"-").replace(/,/g,"__").toLowerCase();var $=class extends d{constructor(t){(t=Object(a.extend)({toggleable:!0,controls:{close:!0,activity:!0}},t,{className:t.className?"ui-btn ".concat(t.className):"ui-btn",ui:{target:".awxjs__ui-btn-target",label:".awxjs__ui-btn-label",close:".awxjs__ui-btn-close",settings:".awxjs__ui-btn-settings",controls:".awxjs__ui-btn-controls"}})).id=t.id||(t.value?t.value.replace(/,/g,"__"):null),super(t),t.controls&&(this._controls=new E({controls:t.controls})),this.setState({selected:!1}),this.initialize()}get id(){return T(this.opts.id||this.opts.value)}get key(){return"".concat(this.parentId?"".concat(this.parentId,"::"):"").concat(this.groupId?"".concat(this.groupId,"::"):"").concat(this.id)}get parentId(){return this.opts.parent}get groupId(){return this.opts.group}get info(){return{id:this.id,key:this.key,value:this.value,group:this.groupId,parent:this.parentId,options:this.options}}get selected(){const{selected:t}=this.state;return t}get toggleable(){return this.opts.toggleable}get controls(){return this._controls}get value(){return this.opts.value}get title(){return this.opts.title}get options(){return this.opts.options}select(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!1===this.selected&&(this.$el.addClass("selected"),this._onSelect(t))}deselect(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.selected&&(this.$el.removeClass("selected"),this._onDeselect(t))}disable(t){this.$el.attr("data-disabled",t?1:0)}matches(t){return(Object(a.isArray)(t)?t:[t]).filter((t=>this.id===t||this.key===t||this.value===t)).length>0}setLoading(t){this.controls&&this.controls.setLoading(t)}_onSelect(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState({selected:!0}),t&&(this.trigger("select",{value:this.value}),this.opts.onSelect&&this.opts.onSelect(this))}_onDeselect(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState({selected:!1}),t&&(this.trigger("deselect",{value:this.value}),this.opts.onDeselect&&this.opts.onDeselect(this))}_render(){return'\n\t\t\t<div class="awxjs__ui-btn">\n\t\t\t\t<div class="awxjs__ui-btn-target">\n\t\t\t\t\t<div class="awxjs__ui-btn-label">'.concat(this.opts.title,"</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")}_onAddedToDOM(){super._onAddedToDOM(),this.$el.attr("data-id",this.id),this.controls&&this.controls.addToButton(this)}_setupEvents(){super._setupEvents(),this.$el.on("click",(t=>{t.stopPropagation();Object(a.toBool)(this.$el.attr("data-disabled"))||!1||(this.selected?this.toggleable&&this.deselect():this.select())}));const t=this.controls;t&&(t.on("change",(t=>{this.trigger("control:change",Object.assign(Object.assign({},this.info),{control:Object.assign({},t.data)}))})),t.ui.settings&&!this.opts.selected&&t.ui.settings.hide(),t.ui.close&&this.ui.target.on("mouseenter",(()=>{this.$el.hasClass("selected")&&!0!==Object(a.toBool)(this.$el.attr("data-disabled"))&&t.ui.close.css("opacity",1)})).on("mouseleave",(e=>{t.ui.close.css("opacity",0)})))}_afterEvents(){this.opts.selected&&this.select()}};var D=class extends ${constructor(t){"all"===t.value?t.multiselect=!1:Object(a.isset)(t.multiselect)||(t.multiselect=!0),super(t)}get key(){return"".concat(this.parentId?"".concat(this.parentId,"::"):"").concat(this.groupId?"".concat(this.groupId,"::"):"").concat(this.id)}get multiselect(){return this.opts.multiselect}_render(t){return"\n\t\t\t<li>".concat(this.title,"</li>\n\t\t")}},z=s("J8dV");var P=class extends d{constructor(t){super(Object(a.extend)({reloadOnChange:!0},t,{ui:{segments:".awxjs__ui-btn-segments ul"}})),this.storedSegments=[]}get id(){return this.opts.id}get parentId(){return this.opts.parentId}get title(){return this.opts.title}get value(){const t=this.selectedSegments().map((t=>t.value));return!1===this.opts.multiselect?t.join(","):t}get segments(){return this.storedSegments}setSegments(t){this.storedSegments=t,this.ui.segments&&t.forEach((t=>{t.addTo(this.ui.segments),t.on("select",(e=>{this._handleSelectSegment(t)})).on("deselect",(e=>{this._handleDeselectSegment(t)}))}))}selectedSegments(){return this.segments.filter((t=>t.selected))}clear(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.selectedSegments().forEach((e=>{e.deselect(t)}))}_handleSelectSegment(t){!1===(this.opts.multiselect&&"all"!==t.value&&!1!==t.multiselect)?this.selectedSegments().forEach((e=>{e.value!==t.value&&e.deselect()})):this.selectedSegments().forEach((t=>{!1===t.multiselect&&t.deselect()})),this._handleValueChange()}_handleDeselectSegment(t){if(0===this.selectedSegments().length)if(this.opts.multiselect){let t;this.segments.forEach((e=>{t||"all"!==e.value&&!1!==e.multiselect||(e.select(),t=e)}))}else this.opts.requiresSelection&&this.segments[0].select();this._handleValueChange()}_handleValueChange(){this.opts.onChange&&this.opts.onChange(this),this.trigger("change",{id:this.id,value:this.value,reload:this.opts.reloadOnChange})}_render(t){return'\n\t\t\t<div data-group="'.concat(this.id,'" class="').concat(z.a.cssPrefix,'ui-btn-segmented__group">\n\t\t\t\t').concat(Object(a.isEmpty)(this.title)?"":'<p class="'.concat(z.a.cssPrefix,'ui-btn-segmented__group-title">').concat(this.title,"</p>"),'\n\t\t\t\t<div class="').concat(z.a.cssPrefix,'ui-btn-segments"><ul></ul></div>\n\t\t\t</div>\n\t\t')}_onAddedToDOM(){super._onAddedToDOM();const t=(this.opts.segments||[]).map((t=>{const e=Object(a.cloneDeep)(t),s=e.value.replace(/\:.+$/,"").replace(/,/,"--").replace(/;/,"__");return e.id=e.id||s,new D(Object.assign(Object.assign({},e),{loader:!1,toggleable:!0===this.opts.multiselect,parent:this.parentId,group:this.id}))}));this.setSegments(t)}};var A=class extends ${get value(){const t=this.selectedSegments();return this._groups.length>0?this.opts.groupMultiselect?this._groups.reduce(((t,e)=>(t[e.id]=e.value,t)),{}):this._groups.map((t=>t.value)).filter((t=>!Object(a.isEmpty)(t))):t.map((t=>t.value))}set value(t){const e=Object(a.isArray)(t)?t:[t],s=this.selectedSegments();t instanceof Array?(e.forEach((t=>{this.selectSegment(t)})),s.forEach((t=>{-1===e.indexOf(t.value)&&-1===e.indexOf(t.key)&&this.deselectSegment(t.key)}))):this._groups.length>0&&this._groups.forEach((t=>{}))}get info(){return Object.assign(Object.assign({},super.info),{valueSegments:this.segmentInfo(!0),filter:this.opts.filter,reload:this.opts.filter&&this.opts.reloadOnChange})}get isExpanded(){return this._expanded}get isFilter(){return this.opts.filter}constructor(t){var e;super(Object(a.extend)({filter:!1,multiselect:!1,groupMultiselect:!0,reloadOnChange:!0,ui:{all:".awxjs__ui-btn-segmented__option-all",segments:".awxjs__ui-btn-segments",groups:".awxjs__ui-btn-segmented__groups"}},t,{className:t.className?"ui-btn-segmented ".concat(t.className):"ui-btn-segmented"})),e=this,this._segments=[],this._groups=[],this._groupsById={},this._value=null,this._expanded=!1,this._handleValueChange=Object(a.debounce)((function(){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const s=Object(a.isEmpty)(e._value)?[]:Object(a.cloneDeep)(e._value);let i;const n=e.value;Object(a.isPlainObject)(s)?i=e.segments().filter((t=>{let e=!1;return Object.keys(s).forEach((i=>{t.value===s[i]&&t.groupId===i&&(e=!0)})),e})).map((t=>t.info)):Object(a.isArray)(s)&&(i=e.segments().filter((t=>-1!==s.indexOf(t.value))).map((t=>t.info))),e._value=Object(a.cloneDeep)(n),t&&e.trigger("value:change",{value:n,currentSegments:e.segmentInfo(!0),previous:s,previousSegments:i,reload:e.opts.reloadOnChange}),e.opts.onChange&&e.opts.onChange(e)}),200),this._triggerTimeout=null}size(){const t=super.size();if(this.selected){const e=this.ui.groups||this.ui.segments,s=e.css("max-height");e.css("max-height","auto");let i=parseFloat(s.replace(/[^0-9\.]/,""));i+=this.el(".awxjs__ui-btn-label").outerHeight(!0),e.css("max-height",s);const n=this.$el.padding();i+=n.top+n.bottom;const a=this.$el.margins();i+=a.top+a.bottom,t.height=i}return t}segments(){return this._groups.length>0?this._groups.reduce(((t,e)=>t=t.concat(e.segments)),[]):this._segments}segmentValues(){return this.segments().map((t=>t.value))}segmentIds(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.segments().map((e=>t?e.key.replace(/^.+___/,""):e.id.replace(/^.+___/,"")))}segmentInfo(){return(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.selectedSegments():this.segments()).map((t=>t.info))}segmentGroups(){return this._groups}containsValue(t){const e=t.replace(/^.+::/,"");return this.segmentValues().indexOf(e)>-1||this.segmentIds().indexOf(e)>-1}containsId(t){return this.segmentIds(!0).indexOf(t)>-1}selectSegment(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setSegmentSelected(t,!0,e)}deselectSegment(t){this.setSegmentSelected(t,!1)}setSegmentSelected(t,e){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!1;const n=this.segments();return n&&n.length>0&&n.forEach((s=>{Object(a.isString)(t)?s.id===t||s.key===t?(e?s.select():s.deselect(),i=!0):this.id===t&&(i=!0):Object(a.isPlainObject)(t)&&Object.keys(t).forEach((n=>{const a=this._groupsById[n];a&&a.segments.forEach((n=>{n.id!==t&&n.key!==t||(e?s.select():s.deselect(),i=!0)}))}))})),i&&e&&s&&(Object(a.isEmpty)(this._value)&&(this._value=this.value),this.select()),i}selectedSegments(){return this.segments().filter((t=>t.selected))}_onSelect(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isExpanded||this._showSegments(!0),super._onSelect(t)}_onDeselect(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isExpanded&&this._showSegments(!1),super._onDeselect(t)}_render(t){let e="";const s=Object(a.get)(this.opts,"segments");return s&&(Object(a.isArray)(s)?(this._renderSegments(s),e+='<div class="awxjs__ui-btn-segments"><ul></ul></div>'):s.groups&&(this._renderGroups(s.groups),e+='<div class="awxjs__ui-btn-segmented__groups"></div>')),'\n\t\t\t<div class="awxjs__ui-btn-segmented">\n\t\t\t\t<div class="awxjs__ui-btn-target">\n\t\t\t\t\t<div class="awxjs__ui-btn-label">'.concat(this.opts.title,"</div>\n\t\t\t\t</div>\n\t\t\t\t").concat(e,"\n\t\t\t</div>\n\t\t")}_renderSegments(t){this._segments=(t||[]).map((t=>{const e=Object(a.cloneDeep)(t);return e.id=e.id||e.value.replace(/\:.+$/,"").replace(/,/,"--").replace(/;/,"__"),e.options=Object(a.extend)({},this.options,e.options),new D(Object.assign(Object.assign({multiselect:this.opts.multiselect},e),{loader:!1,toggleable:!0===this.opts.multiselect,parent:this.id}))}))}_renderGroups(t){Object(a.isset)(this._groupsById)||(this._groupsById={}),this._groups=(t||[]).map(((t,e)=>{const s=Object(a.cloneDeep)(t);s.id=s.id||"".concat(this.id,"-").concat(e),s.options=Object(a.extend)({},this.options,s.options);const i=new P(Object.assign({filter:this.opts.filter,multiselect:this.opts.multiselect,requiresSelection:!0===this.opts.groupMultiselect,reloadOnChange:this.opts.reloadOnChange,parentId:this.id},s));return this._groupsById[s.id]=i,i}))}_onAddedToDOM(){if(super._onAddedToDOM(),this._groups&&this.ui.groups)this._groups.forEach((t=>{t.addTo(this.ui.groups),t.on("change",(t=>{const{id:e,value:s,reload:i}=t.data||{};!1===this.opts.groupMultiselect&&Object(a.isset)(s)&&this._groups.forEach((t=>{t.id!==e&&t.clear(!1)})),this._handleValueChange({reload:i})}))}));else if(this._segments&&this.ui.segments){const t=Object(r.a)("ul",this.ui.segments);this._segments.forEach((e=>{e.addTo(t),e.on("select",(t=>{this._handleSelectSegment(e,this.selected)})).on("deselect",(t=>{this._handleDeselectSegment(e,this.selected)}))}))}this._value=this.value}_setupEvents(){super._setupEvents(),this.ui.groups&&this.ui.groups.on("click",(t=>{t.stopPropagation()}))}_handleSelectSegment(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!1===(this.opts.multiselect&&"all"!==t.value&&!1!==t.multiselect)?this.selectedSegments().forEach((e=>{e.value!==t.value&&e.deselect()})):this.selectedSegments().forEach((t=>{!1===t.multiselect&&t.deselect()})),this.opts.onSelectSegment&&this.opts.onSelectSegment(t),this._handleValueChange({reload:this.opts.filter&&this.opts.reloadOnChange},e)}_handleDeselectSegment(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.state.selected){if(0===this.selectedSegments().length&&this.opts.multiselect){let t;this.segments().forEach((e=>{t||"all"!==e.value&&!1!==e.multiselect||(e.select(),t=e)}))}this.opts.onDeselectSegment&&this.opts.onDeselectSegment(t)}this._handleValueChange({reload:this.opts.filter&&this.opts.reloadOnChange},e)}_showSegments(t){var e;if(t)if(this._value&&this._value.length>0)this._handleValueChange();else if(this._groups&&this._groups.length>0){let t=null;this._groups.forEach((e=>{e.segments.length>0&&(!Object(a.isset)(t)||!0===this.opts.groupMultiselect)&&(e.segments[0].select(),t=e.segments[0])}))}else{null===(e=this.segments()[0])||void 0===e||e.select()}let s=0,i=this.ui.segments;this.ui.groups&&this.ui.groups.length>0?(i=this.ui.groups,s=this.ui.groups.children().reduce(((t,e)=>t+=Object(r.a)(e).outerHeight(!0)),0)):s=Object(r.a)("ul",this.ui.segments).height(),i.css({"max-height":"".concat(t?s:0,"px")}),this._triggerTimeout&&clearTimeout(this._triggerTimeout),this._expanded=t,this._triggerTimeout=setTimeout((()=>{const e=t?"expanded":"collapsed";this.trigger(e)}),t?0:600)}};var I=class extends d{constructor(t){t=t||{},super(t=Object(a.extend)({defaultType:"data-item",multiselect:!0},t,{className:t.className?"ui-btn-group ".concat(t.className):"ui-btn-group",ui:{label:".".concat(z.a.cssPrefix,"ui-btn-group-label"),buttons:".".concat(z.a.cssPrefix,"ui-btn-group-items")}})),this._buttons=[],this.setState({expanded:!0})}get id(){return T(this.opts.id||this.opts.title)}get key(){return this.id}get buttons(){return this._buttons}buttonForId(t){let e;return this.buttons.forEach(((s,i)=>{s.id!==t||Object(a.isset)(e)||(e=s)})),e}buttonForKey(t){let e;return this.buttons.forEach(((s,i)=>{s.key!==t||Object(a.isset)(e)||(e=s)})),e}buttonForValue(t){let e;return this.buttons.forEach(((s,i)=>{s.value!==t||Object(a.isset)(e)||(e=s)})),e}size(){const t=super.size();let e=0;this.ui.label&&(e+=this.ui.label.outerHeight(!0)),this.buttons.forEach((t=>{e+=t.size().height}));const s=this.$el.padding(),i=this.$el.borders();return e+=s.top+s.bottom,e+=i.top+i.bottom,t.height=e,t}_render(t){const e=Object(a.isEmpty)(this.opts.title)?"":'<div class="'.concat(z.a.cssPrefix,'ui-btn-group-label">').concat(this.opts.title,"</div>");return'\n\t\t\t<div class="awxjs__ui-btn-group">\n\t\t\t\t'.concat(e,'\n\t\t\t\t<div class="').concat(z.a.cssPrefix,'ui-btn-group-items" data-multiselect="').concat(this.opts.multiselect?1:0,'"></div>\n\t\t\t</div>\n\t\t')}_onAddedToDOM(){super._onAddedToDOM(),this.opts.buttons&&(this._buttons=(this.opts.buttons||[]).map((t=>{if(t.parent=this.id,t.options=Object.assign(Object.assign({},this.opts.options),t.options),this.opts.controls&&!Object(a.isset)(t.controls)&&(t.controls=Object(a.extend)({},this.opts.controls)),t.segments)return new A(t);t.type||this.opts.defaultType;return new $(t)}))),this.ui.buttons&&0===this.ui.buttons.children().length&&this.buttons.forEach((t=>{t.addTo(this.ui.buttons)}))}_setupEvents(){super._setupEvents(),this.buttons.forEach((t=>{t instanceof A&&t.on("expanded collapsed",(t=>{this.trigger("change:size",t.data)}))})),!1===this.opts.multiselect&&this.buttons.forEach((t=>{t.selected&&(t.disable(!0),this._selectedButton=t),t.on("select",(()=>{this._selectedButton&&(this._selectedButton.deselect(),this._selectedButton.disable(!1)),this._selectedButton=t,t.disable(!0),Object(a.isFunction)(this.opts.onChange)&&this.opts.onChange(t.value),this.trigger("change",{value:t.value})}))}))}};const N=t=>{const e=t;e.type;let s;const i=e.controls;if(i){const t=i.settings;Object(a.isArray)(t)&&Object(a.set)(e,"controls.settings",t.map((t=>{var s;const{type:i}=t;if("opacity"===i){const i=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=1;return Object(a.isset)(t.opacity)?e=t.opacity:["polyline","polygon"].forEach((s=>{const i=t[s],n=Object(a.isFunction)(i)?i({}):i;n&&(n.fill?e=n.fill.opacity:n.stroke&&(e=n.stroke.opacity))})),e}(null===(s=e.options)||void 0===s?void 0:s.style);Object(a.isset)(i)&&(t.options=Object.assign(Object.assign({},t.options),{value:[100*i]}))}return t})))}return s=e.buttons?new I(e):e.segments||e.groups?new A(e):new $(e),s};var F=class extends u{get buttons(){return[...this._buttons||[]]}constructor(t){super(Object(a.extend)({icon:'\n\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 80.5">\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<path d="M98.5,51.3l-13.7-7.3L58,58.2c-2.5,1.3-5.2,2-8,2c-2.8,0-5.5-0.7-8-2L15.2,44.1L1.5,51.3C0.6,51.8,0,52.8,0,53.8\n\t\t\t\t\t\t\ts0.6,2,1.5,2.5l43.5,23c3.2,1.7,6.9,1.7,10.1,0l43.5-23c0.9-0.5,1.5-1.4,1.5-2.5S99.4,51.8,98.5,51.3L98.5,51.3z"/>\n\t\t\t\t\t\t<path d="M1.5,29.2l43.5,23c1.6,0.8,3.3,1.2,5,1.2c1.7,0,3.5-0.4,5-1.3l43.5-23c0.9-0.5,1.5-1.4,1.5-2.5c0-1-0.6-2-1.5-2.5L55,1.3\n\t\t\t\t\t\t\tC53.5,0.4,51.7,0,50,0c-1.7,0-3.4,0.4-5,1.3l-43.5,23C0.6,24.7,0,25.7,0,26.7C0,27.8,0.6,28.7,1.5,29.2L1.5,29.2z"/>\n\t\t\t\t\t</g>\n\t\t\t\t</svg>\n\t\t\t'},t))}buttonForId(t){let e;return this.buttons.forEach(((s,i)=>{Object(a.isset)(e)||(s instanceof I?e=s.buttonForId(t):s.id!==t||Object(a.isset)(e)||(e=s))})),e}buttonForKey(t){let e;return this.buttons.forEach(((s,i)=>{Object(a.isset)(e)||(s instanceof I?e=s.buttonForKey(t):s.key!==t||Object(a.isset)(e)||(e=s))})),e}add(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const s=this.buttons.length;return this.insertAt(s,t,e)}insertAt(t,e){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._buttons||(this._buttons=[]);const i=N(e);return t>=this._buttons.length?(this._buttons.push(i),t=-1):(t=Math.max(0,t),this._buttons.splice(t,0,i)),this._appendButton(i,s,t),this.trigger("button:add",{button:i}),i}insertBefore(t,e){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._indexForId(t);return 0===i?this.insertAt(0,e,s):i>0?this.insertAt(i-1,e,s):this.add(e,s)}insertAfter(t,e){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._indexForId(t);return i>=0?this.insertAt(i+1,e,s):this.add(e,s)}removeAt(t){if(!Object(a.isset)(this._buttons)||t>this._buttons.length-1||t<0)return;const e=this.buttons[t];e&&(this._buttons.splice(t,1),e.$el.remove(),this.trigger("button:remove",{button:e}))}removeForId(t){let e=-1;this.buttons.forEach(((s,i)=>{s.id===t&&-1===e&&(e=i)})),e>=0&&this.removeAt(e)}select(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.handleSelectionState(t,!0,e)}deselect(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.handleSelectionState(t,!1,e)}set(t,e){const s=this.buttonForId(t)||this.buttonForKey(t);s&&s instanceof A&&(s.value=e)}handleSelectionState(t,e){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=(t,e)=>{if(t instanceof A){const i=t.containsId(e),n=t.containsValue(e);s?i&&t.selectSegment(e):i||n?t.selectSegment(e):t.matches(e)&&t.select()}else t instanceof $&&t.matches(e)&&t.select()},n=(t,e)=>{if(t instanceof A){const i=t.containsId(e),n=t.containsValue(e);t.matches(e)?t.deselect():s?i&&t.deselectSegment(e):(i||n)&&t.deselectSegment(e)}else t instanceof $&&t.matches(e)&&t.deselect()};Object(a.isArray)(t)?t.filter((t=>!Object(a.isEmpty)(t))).forEach((t=>this.handleSelectionState(t,e))):this.buttons&&this.buttons.forEach((s=>{const a=t;if(s instanceof I){s.buttons.forEach((t=>{e?i(t,a):n(t,a)}))}else(s instanceof $||s instanceof A)&&(e?i(s,a):n(s,a))}))}_onAddedToDOM(){if(this.ui.content.append('<div class="awxjs__app__ui-panel-buttons"></div>'),this.ui.buttons=Object(r.a)(".awxjs__app__ui-panel-buttons",this.$el),this.opts.buttons){const t=[],e=[];this.opts.buttons.forEach((s=>{const i=N(s);i instanceof I&&e.push(i),t.push(i)})),this._buttons=t}this.buttons.forEach((t=>{this._appendButton(t)}));const t=()=>{0===this.buttons.length?this.hide():this.show()};this.on("button:add button:remove",(()=>{t()})),t()}_indexForId(t){let e=-1;return this.buttons.forEach(((s,i)=>{s.id===t&&-1===e&&(e=i)})),e}_appendButton(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(s>=0?t.addTo(this.ui.buttons,!1,s):t.addTo(this.ui.buttons),e)if(t instanceof I){t.buttons.forEach((t=>{this._addButtonEvents(t)}))}else this._addButtonEvents(t)}_addButtonEvents(t){t.on("select",(e=>{this.trigger("select",Object.assign({},t.info))})).on("deselect",(e=>{this.trigger("deselect",Object.assign({},t.info))})).on("value:change",(e=>{this.trigger("change",Object.assign(Object.assign({},t.info),e.data))})).on("control:change",(e=>{this.trigger("control:change",Object.assign(Object.assign({},t.info),e.data))})),t instanceof I?t.on("change:size",(t=>{this.trigger("change:size")})):t instanceof A&&t.on("expanded",(()=>{this.trigger("change:size")})).on("collapsed",(()=>{this.trigger("change:size")}))}},L=s("YoRi"),H=s("R1Yn");var R,V=class extends ${get value(){let t=this.opts.value;const{values:e}=this.opts;return e&&e.forEach(((e,s)=>{this.selected&&1===s?t=e.value||e:this.selected||0!==s||(t=e.value||e)})),t}constructor(t){(t=Object(a.extend)({loader:!1},t,{className:t.className?"ui-switch ".concat(t.className):"ui-switch"})).values&&(t.values=t.values.map((t=>Object(a.isPlainObject)(t)?t:{label:t,value:t}))),super(t)}_render(t){const{label:e,values:s}=this.opts,i={left:"",right:""};return s&&s.forEach(((t,e)=>{const s=0===e?"left":"right";let n="";n=Object(a.isPlainObject)(t)?t.label:t,i[s]='<div class="awxjs__ui-switch-label awxjs__ui-switch-label-'.concat(s,'">').concat(n,"</div>")})),'\n\t\t\t<div class="awxjs__ui-switch">\n\t\t\t\t'.concat(e?'<div class="awxjs__ui-switch-label">'.concat(e,"</div>"):"","\n\t\t\t\t").concat(i.left,'\n\t\t\t\t<div class="awxjs__ui-switch__control">\n\t\t\t\t\t<div class="awxjs__ui-switch__control-indicator"></div>\n\t\t\t\t</div>\n\t\t\t\t').concat(i.right,"\n\t\t\t</div>\n\t\t")}};!function(t){t.snow=t=>t>=4?5:t>=3?4:t>=2?3:t>=1?2:t>.1?1:0,t.ice=t=>t>=.4?5:t>=.3?4:t>=.2?3:t>=.1?2:t<.1&&t>0?1:0,t.rain=t=>t>=1?5:t>=.75?4:t>=.5?3:t>=.25?2:t>=.1?1:0,t.wind=t=>t>=50?5:t>=40?4:t>=30?3:t>=20?2:t>10?1:0,t.lightning=t=>t>=80?5:t>=60?4:t>=40?3:t>=15?2:t<15&&t>0?1:0,t.convective=t=>({high:5,moderate:4,enhanced:3,slight:2,marginal:1,general:.5,none:0}[t])}(R||(R={}));const B={units:{id:"units",static:!0,renderer:t=>'\n\t\t\t<div class="awxjs__app__ui-panel-info__units">\n\t\t\t\t<div class="awxjs__ui-cols align-center justify-between">\n\t\t\t\t\t<div class="label">Units</div>\n\t\t\t\t\t<div class="control"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t',init:(t,e)=>{const s=new V({values:[{label:"Imperial",value:"imperial"},{label:"Metric",value:"metric"}]}),i=()=>{"metric"===e.units?s.select():s.deselect()};e.on("change:units",(t=>{i()})),s.addTo(t.el(".control")),s.on("select",(()=>{e.units="metric"})).on("deselect",(()=>{e.units="imperial"})),i()}},place:{id:"place",requiresData:!0,request:(t,e)=>t.api().endpoint("places"),data:t=>Object(a.isEmpty)(t)?null:(t=t.places||t).place,renderer:t=>'\n\t\t\t<div class="awxjs__app__ui-panel-info__place">\n\t\t\t\t<div class="awxjs__app__ui-panel-info__place-name">'.concat(t.name).concat(Object(a.isEmpty)(t.state)?"":", ".concat(t.state),", ").concat(t.country,"</div>\n\t\t\t</div>\n\t\t")},obs:{id:"observations",requiresData:!0,request:(t,e)=>t.api().endpoint("conditions"),data:t=>{var e;if(Object(a.isEmpty)(t))return null;if((null===(e=(t=t.observations||t).conditions)||void 0===e?void 0:e.length)>0){return(t.conditions[0]||[]).periods[0]}return t.ob},renderer:t=>{const e=Object(a.dateFromISO)(t.dateTimeISO),s="metric"===t.units;return'\n\t\t\t\t<div class="awxjs__app__ui-panel-info__obs">\n\t\t\t\t\t<div class="awxjs__app__ui-panel-info__obs-timestamp">Last updated at '.concat(Object(a.formatDate)(e,s?"HH:mm, MMM d, yyyy":"h:mm a, MMM dd, yyyy"),'</div>\n\t\t\t\t\t<div class="awxjs__ui-cols">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class="awxjs__ui-cols">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div class="awxjs__app__ui-panel-info__obs-temp">').concat(Object(L.a)(t,"tempF","tempC",s)||"N/A",'</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<img class="awxjs__app__ui-panel-info__obs-icon" src="https://cdn.aerisapi.com/wxblox/icons/').concat(t.icon||"na.png",'">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="awxjs__app__ui-panel-info__obs-wx">').concat(t.weatherPrimary,'</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="awxjs__app__ui-panel-info__obs-details">\n\t\t\t\t\t\t\t<div class="awxjs__ui-row">\n\t\t\t\t\t\t\t\t<div>Winds</div>\n\t\t\t\t\t\t\t\t<div>').concat(t.windSpeedMPH>0?"".concat(Object(L.a)(t,"windSpeedMPH","windSpeedKPH",s)):"Calm",'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="awxjs__ui-row">\n\t\t\t\t\t\t\t\t<div>Dew Point</div>\n\t\t\t\t\t\t\t\t<div>').concat(Object(L.a)(t,"dewpointF","dewpointC",s),'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="awxjs__ui-row">\n\t\t\t\t\t\t\t\t<div>Humidity</div>\n\t\t\t\t\t\t\t\t<div>').concat(Object(L.a)(t,"humidity"),'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="awxjs__ui-row">\n\t\t\t\t\t\t\t\t<div>Pressure</div>\n\t\t\t\t\t\t\t\t<div>').concat(Object(L.a)(t,"pressureIN","pressureMB",s),'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="awxjs__ui-row">\n\t\t\t\t\t\t\t\t<div>Visibility</div>\n\t\t\t\t\t\t\t\t<div>').concat(Object(L.a)(t,"visibilityMI","visibilityKM",s),'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="awxjs__ui-row">\n\t\t\t\t\t\t\t\t<div>Sky Cover</div>\n\t\t\t\t\t\t\t\t<div>').concat(Object(L.a)(t,"sky"),"</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t")}},forecast:{id:"forecast",requiresData:!0,request:(t,e)=>{const s="\n\t\t\t\t\ttimestamp,dateTimeISO,tempF,tempC,icon,weatherPrimary,windSpeedMPH,windSpeedKPH,windSpeedMinMPH,windSpeedMinKPH,\n\t\t\t\t\twindSpeedMaxMPH,windSpeedMaxKPH,windGustMPH,windGustKPH,snowIN,snowCM,precipIN,precipMM\n\t\t\t\t".split(",").map((t=>"periods.".concat(t)));return t.api().endpoint("forecasts").fields(s.join(",")).filter("3hr").limit(7)},data:t=>Object(a.isEmpty)(t)?null:((t=t.forecasts||t)&&(t[0]&&(t=t[0]),t=t.periods),{periods:t||[]}),renderer:t=>{const e="metric"===t.units;return t.periods.map((t=>{const s=Object(a.dateFromISO)(t.dateTimeISO);let i="Calm";return t.windSpeedMaxMPH>5?i=e?"".concat(Object(a.toRangeStr)(t.windSpeedMinKPH,t.windSpeedMaxKPH,5)," ").concat(Object(L.c)("speed",!0)):"".concat(Object(a.toRangeStr)(t.windSpeedMinMPH,t.windSpeedMaxMPH,5)," ").concat(Object(L.c)("speed",!1)):t.windSpeedMaxMPH<5&&t.windSpeedMinMPH>0&&(i=e?"< 8 kmh":"< 5 mph"),'\n\t\t\t\t\t<div class="awxjs__app__ui-panel-info__forecast">\n\t\t\t\t\t\t<div class="awxjs__app__ui-panel-info__forecast-period">\n\t\t\t\t\t\t\t<div class="awxjs__ui-cols align-center">\n\t\t\t\t\t\t\t\t<div class="awxjs__app__ui-panel-info__forecast-ts">'.concat(Object(a.formatDate)(s,e?"HH:00":"h a"),'</div>\n\t\t\t\t\t\t\t\t<div><img class="awxjs__app__ui-panel-info__forecast-icon" src="https://cdn.aerisapi.com/wxblox/icons/').concat(t.icon||"na.png",'"></div>\n\t\t\t\t\t\t\t\t<div class="awxjs__app__ui-panel-info__forecast-temp">').concat(Object(L.a)(t,"tempF","tempC",e),'</div>\n\t\t\t\t\t\t\t\t<div class="awxjs__app__ui-panel-info__forecast-conditions">\n\t\t\t\t\t\t\t\t\t<div class="awxjs__app__ui-panel-info__forecast-wx">').concat(t.weatherPrimary,'</div>\n\t\t\t\t\t\t\t\t\t<div class="awxjs__app__ui-panel-info__forecast-detail"><span>Winds</span> ').concat(i,"</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t")})).join("")}},alerts:{id:"alerts",requiresData:!0,request:(t,e)=>t.api().endpoint("alerts").fields("details.type,details.name,timestamps"),data:t=>{if(Object(a.isEmpty)(t))return null;const e=Object(a.get)(t,"places.profile");return t.alerts&&(t=t.alerts),Object(a.isArray)(t)?t.map((t=>Object(a.extend)(t,{profile:e}))):null},renderer:t=>{const e="metric"===t.units,s=t.map((t=>{let s="";const i=t.timestamps;if(i){const n=Object(a.get)(t,"profile.tzoffset")?1e3*Object(a.get)(t,"profile.tzoffset"):0,o=6e4*(new Date).getTimezoneOffset()+n,c=Object(a.get)(t,"profile.tzname")||"",r=new Date((new Date).getTime()+o),l=new Date(new Date(1e3*i.begins).getTime()+o),h=new Date(new Date(1e3*i.expires).getTime()+o),d=e?"HH:00 [".concat(c,"], ddd M/d"):"h:mm a '".concat(c,"', EEE M/d");s=l.getTime()<r.getTime()?" until ".concat(Object(a.formatDate)(h,d)):" from ".concat(Object(a.formatDate)(l,d)," until ").concat(Object(a.formatDate)(h,d))}return'\n\t\t\t\t\t<div class="awxjs__app__ui-panel-info__alert">\n\t\t\t\t\t\t<span class="awxjs__app__ui-panel-info__alert-name"><strong>'.concat(Object(o.ucwords)(t.details.name.toLowerCase()),"</strong></span>\n\t\t\t\t\t<br>").concat(s,"</div>\n\t\t\t\t")})).join("");return'<div class="awxjs__app__ui-panel-info__alerts">'.concat(s,"</div>")}},threats:{id:"threats",requiresData:!0,request:(t,e)=>t.api().endpoint("threats").radius("50mi"),data:t=>Object(a.get)(t,"threats.0.periods.0.storms"),renderer:t=>Object(H.renderWithFallback)((t=>'<div class="awxjs__app__ui-panel-info__threats"><div class="awxjs__app__ui-panel-info__threats-row">'.concat(Object(o.formatDirections)(t.phrase.long),"</div></div>\n\t\t")),t)},outlook:{id:"outlook",requiresData:!0,request:(t,e)=>t.api().endpoint("phrases/summary"),data:t=>Object(a.get)(t,"phrases_summary.0"),renderer:t=>Object(H.renderWithFallback)((t=>{const e="metric"===t.units;return'<div class="awxjs__app__ui-panel-info__outlook">'.concat(e?Object(a.get)(t,"phrases.longMET"):Object(a.get)(t,"phrases.long"),"</div>")}),t)},hazards:{id:"hazards",requiresData:!0,config:{lightning:!1},request:function(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Object(a.isset)(e.p))return;const i=t.api(),n="\n\t\t\t\t\ttimestamp,dateTimeISO,tempF,tempC,icon,weatherPrimary,windSpeedMPH,windSpeedKPH,windSpeedMinMPH,windSpeedMinKPH,\n\t\t\t\t\twindSpeedMaxMPH,windSpeedMaxKPH,windGustMPH,windGustKPH,snowIN,snowCM,precipIN,precipMM\n\t\t\t\t".split(",").map((t=>"periods.".concat(t)));return i.addRequest(t.api().endpoint("forecasts").fields(n.join(",")).filter("3hr").limit(7)),i.addRequest(t.api().endpoint("observations")),i.addRequest(t.api().endpoint("convective/outlook").action("contains")),s.lightning&&i.addRequest(t.api().endpoint("lightning/summary").action("closest").radius("60mi").limit(100)),i},data:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object(a.isEmpty)(t))return;const s=Object(a.get)(t,"observations.ob")||{},i=Object(a.get)(t,"forecasts"),n=Object(a.get)(t,"convective_outlook_contains"),o=Object(a.get)(t,"lightning_summary_closest");if(Object(a.isEmpty)(s)&&Object(a.isEmpty)(i))return;const c=[];if(i&&i.length>0){const t=i[0].periods;let e=0,n=0,a=0,o=0;s&&s.tempF<=30&&!1===/snow/.test(s.weatherPrimary)&&(o+=s.precipIN),t.forEach((t=>{e+=t.snowIN,a=Math.max(a,t.windGustMPH),t.tempF>=30&&(n+=t.precipIN),t.tempF>=28&&t.tempF<=32&&(o+=t.precipIN)})),c.push({type:"snow",name:"Snow",value:e}),c.push({type:"ice",name:"Ice",value:o}),c.push({type:"rain",name:"Rain",value:n}),c.push({type:"wind",name:"Wind",value:a})}if(n&&n.length>0){const t=n[0].details.risk;c.push({type:"convective",name:"Convective",value:t.type})}else c.push({type:"convective",name:"Convective",value:"none"});if(!0===e.lightning)if(o){const t=Object(a.get)(o[0]||o,"summary.pulse.count");c.push({type:"lightning",name:"Lightning",value:t})}else c.push({type:"lightning",name:"Lightning",value:0});return c},renderer:t=>{const e=t.map((t=>{const e=(s=t.type,i=t.value,("snow"===s?R.snow(i):"ice"===s?R.ice(i):"rain"===s?R.rain(i):"wind"===s?R.wind(i):"lightning"===s?R.lightning(i):"convective"===s?R.convective(i):0)||0);var s,i;const n=Math.round(e/5*1e3)/10,a="".concat(e).replace(/\./g,"p");let o="None";return n>=80?o="Major":n>=60?o="High":n>=40?o="Moderate":n>=20?o="Low":n>0&&(o="Minimal"),'\n\t\t\t\t\t<div class="awxjs__app__ui-panel-info__hazard awxjs__ui-cols align-center">\n\t\t\t\t\t\t<div class="awxjs__app__ui-panel-info__hazard-label">'.concat(t.name,'</div>\n\t\t\t\t\t\t<div class="awxjs__app__ui-panel-info__hazard-bar">\n\t\t\t\t\t\t\t<div class="awxjs__app__ui-panel-info__hazard-bar-inner">\n\t\t\t\t\t\t\t\t<div class="awxjs__app__ui-panel-info__hazard-bar-progress awxjs__app__ui-panel-info__hazard-indice-fill-').concat(a,'" style="width:').concat(n,'%;"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="awxjs__app__ui-panel-info__hazard-value awxjs__app__ui-panel-info__hazard-value-').concat(a,'">').concat(o,"</div>\n\t\t\t\t\t</div>\n\t\t\t\t")}));return'<div class="awxjs__app__ui-panel-info__hazards">'.concat(e.join(""),"</div>")}}};var q=B;class W extends h{get static(){return this.opts.static}get request(){return this.opts.request}constructor(t,e){if(t=Object(a.extend)({},t,{className:t.className?"app__ui-panel-info__view ".concat(t.className):"app__ui-panel-info__view"}),Object(a.isString)(t.renderer)){const e=W.getSection(t.renderer);e&&(t=Object(a.extend)({},e,t,{renderer:e.renderer}))}t.id&&(t.className+=" awxjs__app__ui-panel-info__view-".concat(t.id)),super(t,e)}addToContentView(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const s=this.opts.init;this.addTo(t.$el,!1,e),s&&Object(a.isFunction)(s)&&s(this,t)}static setSection(t,e){q[t]=e}static getSection(t){return q[t]}_render(t){let e="",s=this.opts.renderer;if(this.opts.requiresData&&Object(a.isEmpty)(t)&&(s=null),s){const i=Object.keys(q).reduce(((t,e)=>(t[e]=q[e].renderer,t)),{}),n=this.opts.title?'<div class="awxjs__app__ui-panel-info__view-title">'.concat(this.opts.title,"</div>"):"";if(Object(a.isFunction)(s)){const a=s;e="\n\t\t\t\t\t".concat(n,"\n\t\t\t\t\t").concat(a(t||{},i),"\n\t\t\t\t")}else Object(a.isString)(s)&&(e="\n\t\t\t\t\t".concat(n,"\n\t\t\t\t\t").concat(s,"\n\t\t\t\t"))}return'\n\t\t\t<div class="awxjs__'.concat(this.opts.className,'">').concat(e,"</div>\n\t\t")}}W.cached=q;var K=W;var U=class extends h{get views(){return this._views}get units(){return this._units}set units(t){t!==this._units&&(this._units=t,this.trigger("change:units",{units:t}),this.update())}constructor(t,e){super(t=Object(a.extend)({units:"imperial",className:t.className?"app__ui-panel-info__content-view ".concat(t.className):"app__ui-panel-info__content-view"},t),e),this.units=t.units,Object(a.isArray)(t.views)&&(this._views=[],t.views.forEach((t=>{if(Object(a.isPlainObject)(t)){t=new K(t)}t instanceof K&&this._views.push(t)})))}load(t,e,s){let i=Object(a.isFunction)(this.opts.request)?this.opts.request(s):this.opts.request;if(!i){const s=[];this._views.forEach((i=>{if(i.request&&Object(a.isFunction)(i.request)){const n=i.request(t,e,i.opts.config);n&&s.push(n)}})),s.length>0&&(i=t.api(),s.forEach((t=>{t.requests&&t.requests.length>0?t.requests.forEach((t=>i.addRequest(t))):i.addRequest(t)})))}i?(e&&i.setParams(e),this.trigger("load:start"),i.get().then((t=>{let e=t.data||{};if(e.responses&&e.responses.length>0){const t={};e.responses.forEach((e=>{const s=e.request.replace(/\?.*$/,"").replace(/^\//,"").replace(/(\/|,)/g,"_");t[s]=e.response})),e=t}e=Object.assign(Object.assign({},e),s),this.update(e),this.trigger("load:done")})).catch((t=>{console.error("awxjs.InfoPanelContentView.load",t)}))):s&&this.update(s)}update(t){super.update(t,!1),Object(a.isset)(this.data)&&0!==Object.keys(this.data).length&&this.$el&&this.views&&(this.views.forEach(((e,s)=>{const i=this._dataForView(e);!1===e.isMounted?this._renderView(e,t,s):!0!==e.static&&e.update(i)})),this._afterRender())}_render(t){return'\n\t\t\t<div class="awxjs__app__ui-panel-info__content-view"></div>\n\t\t'}_renderView(t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;const s=this._dataForView(t);t.update(s),t.addToContentView(this,e)}_dataForView(t){const e=this.data,s=Object(a.isFunction)(t.opts.data)?t.opts.data(Object(a.cloneDeep)(e),t.opts.config):e;return s&&(s.units=this.units),s}_afterRender(){this.$el.parent()&&this.trigger("update")}_onAddedToDOM(){super._onAddedToDOM();const t=this.data;this.views&&this.views.forEach((e=>this._renderView(e,t)))}};var G=class extends u{get units(){return this._units}set units(t){t!==this._units&&(this._units=t,this._contentView&&(this._contentView.units=t),this.trigger("change:units",{units:t}))}constructor(t){(t=Object(a.extend)({metric:!1,ui:{container:".awxjs__app__ui-panel-info-container",inner:".awxjs__app__ui-panel-info-inner",title:".awxjs__app__ui-panel-info-title",content:".awxjs__app__ui-panel-info-content",close:".awxjs__app__ui-panel-info-close"}},t)).className=Object(a.isset)(t.className)?"app__ui-panel-info ".concat(t.className):"app__ui-panel-info",super(t),this._account=t.account,this._indicator=new p.a,this.setState({visible:!1}),this._content={},this.units=t.metric?"metric":"imperial",t.sections&&Object.keys(t.sections).forEach((e=>{K.setSection(e,t.sections[e])})),t.views&&Object.keys(t.views).forEach(((e,s)=>{const i=t.views[e],n=this.setContentView(e,i);n&&0===s&&(this._contentView=n)}))}show(t,e){return this.setState({visible:!0}),e&&this.update(e),t&&this.setTitle(t),this._updateSize(),this.ui.content.css({opacity:1}),this.trigger("show"),this}getContentContainer(){return this.ui.inner}showContent(t,e,s){const i=this._content[t];return i?(i.units=this.units,i!==this._contentView&&(this.reset(),this._contentView=i),this._contentView.parent()||this._contentView.addTo(this.ui.content),s&&this.update(s),this.trigger("change:content",{key:t}),this.show(e,null)):console.error("[Aeris] Invalid view key '".concat(t,"' requested for InfoPanel. Make sure view has been defined in the InfoPanel 'views' configuration.")),this}setContentView(t,e){let s;return Object(a.isPlainObject)(e)?s=new U(e):e instanceof U&&(s=e),s&&(s.on("load:start",(()=>{this._indicator.startAnimating(),this.ui.content.css({opacity:0}),this.trigger("load:start")})).on("load:done",(()=>{this._indicator.stopAnimating(),this.ui.content.css({opacity:1}),this.trigger("load:done")})).on("update",(()=>{this._updateSize()})).on("change:units",(t=>{this.units=t.data.units})),this._content[t]=s),s}close(){return this._indicator.stopAnimating(),this.setHeight(0),this.ui.content.css({opacity:0}),this.setState({visible:!1}),this.trigger("close"),setTimeout((()=>{this.ui.content.empty()}),500),this}setTitle(t){return this.ui.title.html(t),this}update(t){return this._contentView&&this._contentView.update(t),this}setWidth(t){return this.$el.css({"max-width":"".concat(t,"px")}),this}setHeight(t){this.$el.css({"max-height":"".concat(t,"px")});const e=this.ui.inner.bounds();return this._indicator.$el.css({"max-height":"".concat(t-e.top-75,"px")}),this}setMetric(t){this.opts.metric=t,this.units=t?"metric":"imperial"}load(t,e){this._contentView?this._contentView.load(this._account,t,e):console.error("[Aeris] Cannot load data for InfoPanel, no active content view defined. Use `showContent(:key, :title, :data)` to set the active content view before calling `load()`.")}reset(){this._contentView&&this._contentView.remove(),this.ui.content.empty()}_render(){return'\n\t\t\t<div class="awxjs__app__ui-panel-info">\n\t\t\t\t<div class="awxjs__app__ui-panel-info-top">\n\t\t\t\t\t<div class="awxjs__app__ui-panel-info-title"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="awxjs__app__ui-panel-info-container">\n\t\t\t\t\t<div class="awxjs__app__ui-panel-info-inner">\n\t\t\t\t\t\t<div class="awxjs__app__ui-panel-info-content"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<button class="awxjs__app__ui-panel-info-close">\n\t\t\t\t\t'.concat('\n\t<svg width="100pt" height="100pt" version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n\t\t<path d="m22.699 77.301c0.80078 0.80078 1.8008 1.1992 2.8008 1.1992s2-0.39844 2.8008-1.1992l21.699-21.602 21.699 21.699c0.80078 0.80078 1.8008 1.1992 2.8008 1.1992s2-0.39844 2.8008-1.1992c1.6016-1.6016 1.6016-4.1016 0-5.6992l-21.602-21.699 21.699-21.699c1.6016-1.6016 1.6016-4.1016 0-5.6992-1.6016-1.6016-4.1016-1.6016-5.6992 0l-21.699 21.699-21.699-21.602c-1.6016-1.6016-4.1016-1.6016-5.6992 0-1.6016 1.6016-1.6016 4.1016 0 5.6992l21.699 21.602-21.602 21.699c-1.5977 1.5-1.5977 4.1016 0 5.6016z"/>\n\t</svg>\n',"\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t")}_setupEvents(){super._setupEvents(),this._indicator.appendTo(this.ui.inner),this.ui.close.on("click",(()=>{this.close()}))}_updateSize(){if(!this.visible)return;const t=this.$el.parent();if(!t)return;const e=t.bounds(!0),s=this.$el.bounds(!0),i=this.ui.inner.bounds(!0),n=s.top-e.top;let a=e.height-2*n-100,o=Math.max(175,i.height+(i.top-s.top));a>900&&(a=900);"compact"===Object(c.i)().width?(this.setWidth(e.width-2*s.left),o=.5*e.height):s.width>.3*e.width?this.setWidth(Math.max(300,Math.ceil(.3*e.width))):this.setWidth(400),this.$el.width()<=320?this.$el.addClass("awxjs__app__ui-panel-info-compact"):this.$el.removeClass("awxjs__app__ui-panel-info-compact"),this.setHeight(Math.min(a,o))}},X=s("/Tr7"),Y=s("jIYg");function Z(t){Object(Y.a)(1,arguments);var e=Object(X.a)(t);return e.setHours(0,0,0,0),e}var J=s("/h9T");function Q(t,e){Object(Y.a)(2,arguments);var s=Object(X.a)(t),i=Object(J.a)(e);return isNaN(i)?new Date(NaN):i?(s.setDate(s.getDate()+i),s):s}function tt(t,e){Object(Y.a)(2,arguments);var s=Object(X.a)(t),i=Object(X.a)(e);return s.getTime()===i.getTime()}var et=class extends d{constructor(t){super(t=Object(a.extend)({range:{min:0,max:1},ticks:!0,ui:{range:".awxjs__ui-slider-span-inner",past:".awxjs__ui-slider-span-past",future:".awxjs__ui-slider-span-future",ticks:".awxjs__ui-slider-ticks",indicator:".awxjs__ui-slider-indicator"}},t,{className:Object(a.get)(t,"className")?"ui-slider ".concat(t.className):"ui-slider"})),this.setState({dragging:!1}),this._mouse={x:0,y:0}}get dragging(){const{dragging:t}=this.state;return t}indicatorSize(){return{height:this.ui.indicator.outerHeight(!0),width:this.ui.indicator.outerWidth(!0)}}value(t){return Object(a.isset)(this._x)?(Object(a.isset)(t)&&!Number.isNaN(t)||(t=this.position()),t*((this.opts.range.max-this.opts.range.min)/(this._x.max-this._x.min))):null}setValue(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setPosition(t/this._increment(),e)}position(){let t=this.ui.indicator.css("left");return!Object(a.isEmpty)(t)&&Object(a.isset)(t)||(t="0px"),Number.parseInt(t.replace(/[^0-9\.-]/g,""),10)}setPosition(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!1===Number.isNaN(t)&&(t=Math.max(Math.min(t,this._x.max),0),this.ui.indicator.css("left","".concat(t,"px")),e&&this.trigger("change",{value:this.value(),position:this.position(),progress:this.progress()}))}progress(){const t=this._x.max-this._x.min;return(this.position()-this._x.min)/t}setProgress(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const s=this._x.max-this._x.min,i=Math.round(this._x.min+s*t);i!==this.position()&&this.setPosition(i,e)}setDateRange(t,e){const s=(new Date).getTime(),i=e.getTime()-t.getTime();let n=1,a=0;e.getTime()>s&&(t.getTime()>s?(n=0,a=1):(n=(s-t.getTime())/i,a=(e.getTime()-s)/i)),n>0?(n=Math.min(100,Math.round(100*n*100)/100),this.ui.past.css({width:"".concat(n,"%")}).show()):this.ui.past.hide(),a>0?(a=Math.min(100,Math.round(100*a*100)/100),this.ui.future.css({width:"".concat(a,"%")}).show()):this.ui.future.hide()}setTicks(t){if(!0===this.opts.ticks&&this.ui.ticks){const e=this.indicatorSize(),s=e.width/2,i=this.$el.width()-e.width;this.ui.ticks.css({left:"".concat(s,"px"),width:"".concat(i,"px")}),this.ui.ticks.empty(),Object.keys(t).sort().forEach((e=>{const s=100*parseFloat(e);this.ui.ticks.append('\n\t\t\t\t\t<div class="awxjs__ui-slider-tick" style="left:'.concat(s,'%;">\n\t\t\t\t\t\t<div class="awxjs__ui-slider-tick-label">').concat(t[e],"</div>\n\t\t\t\t\t</div>\n\t\t\t\t"))}))}}_render(){return'\n\t\t\t<div class="awxjs__ui-slider">\n\t\t\t\t<div class="awxjs__ui-slider-span">\n\t\t\t\t\t<div class="awxjs__ui-slider-span-inner">\n\t\t\t\t\t\t<div class="awxjs__ui-slider-span-item awxjs__ui-slider-span-past"></div>\n\t\t\t\t\t\t<div class="awxjs__ui-slider-span-item awxjs__ui-slider-span-future"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="awxjs__ui-slider-ticks"></div>\n\t\t\t\t<div class="awxjs__ui-slider-indicator"></div>\n\t\t\t</div>\n\t\t'}_layout(){const t=Object(a.isset)(this._x)?this.progress():0;if(this._x={min:0,max:this.$el.width()-this.ui.indicator.outerWidth(!0)},this.setProgress(t),this.ui.range){const t=this.indicatorSize().width/2,e=this._x.max-this._x.min;this.ui.range.css({left:"".concat(t,"px"),width:"".concat(e,"px")})}}_setupEvents(){const t=t=>{this._handleDrag(t)},e=s=>{Object(r.a)(document).off("mousemove touchmove",t),Object(r.a)(document).off("mouseup touchend",e),this.setState({dragging:!1}),this.ui.indicator.removeClass("is-dragging"),this.trigger("slide:stop",{mouse:this._mouse})};this.ui.indicator.on("mousedown touchstart",(s=>{s.preventDefault(),this.setState({dragging:!0}),this._mouse.x=s.pageX,this._mouse.y=s.pageY,this.ui.indicator.addClass("is-dragging"),this.trigger("slide:start",{mouse:this._mouse}),Object(r.a)(document).on("mousemove touchmove",t),Object(r.a)(document).on("mouseup touchend",e)})),this.ui.ticks.on("click",(t=>{let e=t.layerX;if(t.target!==this.ui.ticks[0]){const s=this.ui.ticks.bounds();e=t.x-s.left}const s=e/this.ui.ticks.width();this.setProgress(s)}))}_increment(){return(this._x.max-this._x.min)/(this.opts.range.max-this.opts.range.min)}_handleDrag(t){const{dragging:e}=this.state;if(e){const e=t.pageX-this._mouse.x;let s=this.position();if(0===e)return;s+=e,this.setPosition(s,!0),this._mouse.x=t.pageX,this._mouse.y=t.pageY}}};var st=class extends h{get slider(){return this._slider}constructor(t,e){super(e=Object(a.extend)({className:Object(a.get)(e,"className")?"ui-timeline ".concat(e.className):"ui-timeline",ui:{periods:".awxjs__ui-timeline__periods"},formatters:{time:"h:mm",date:"M/d",day:"EEE",dateFull:"EEE MMM d"}},e)),this._slider=new et(e.slider),this._animation=t}setPosition(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._slider.setPosition(t,e)}setProgress(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._slider.setProgress(t,e)}setFormatters(t){this.opts.formatters=Object(a.extend)({},this.opts.formatters,t),this._layout()}_render(){return'\n\t\t\t<div class="awxjs__ui-timeline">\n\t\t\t\t<div class="awxjs__ui-timeline__periods"></div>\n\t\t\t</div>\n\t\t'}_layout(){const t=this._animation.startDate(),e=this._animation.endDate();this._layoutPeriods(t,e),this._setupSliderTicks(t,e)}_onAddedToDOM(){this._slider.addTo(this.$el),this._animation&&(this._handleDateRangeChange(this._animation.startDate(),this._animation.endDate()),this._updateForTime(this._animation.currentTime))}_setupEvents(){const t=this._animation,e=this._slider;t&&t.on("start:change end:change",(t=>{const{from:e,to:s}=t.data;e&&s&&this._handleDateRangeChange(e,s)})).on("advance",(e=>{this._updateForTime(t.currentTime)})),e&&(this._sliderChangeHandler||(this._sliderChangeHandler=Object(a.debounce)((e=>{const s=t.endDate().getTime()-t.startDate().getTime(),i=Math.round(t.startDate().getTime()+s*e.data.progress);t.stop(),t.goToTime(i)}),250)),e.on("change",(e=>{t.pause(),this._sliderChangeHandler(e)})))}_updateForTime(t){const e=this._animation;if(e){const t=e.endDate().getTime()-e.startDate().getTime(),s=e.currentOffset/t;this.setProgress(s,!1)}}_handleDateRangeChange(t,e){this._layout(),this._slider.setDateRange(t,e)}_layoutPeriods(t,e){const s=e.getTime()-t.getTime(),i=this.ui.periods;let n=i.width(),o=0;if(this._slider){const t=this._slider.indicatorSize();n-=t.width,o=t.width/2}const c=this.opts.formatters;if(i.empty(),t.getDate()!==e.getDate()||t.getMonth()!==e.getMonth()){let r,l,h=0,d=Z(t).getTime(),u=0,p=0,_=0;const g=40,m=new Date(t.getFullYear(),t.getMonth(),t.getDate()),v=new Date(e.getFullYear(),e.getMonth(),e.getDate()),b=Math.round((v.getTime()-m.getTime())/864e5);for(;d<e.getTime();){let m=new Date(d);const v=m.toString().replace(/^[^\(]+/,"").replace(/[^a-zA-Z]/g,"");if(!Object(a.isEmpty)(v)){const t=/^(\wDT|\w+DaylightTime)/.test(v);if(Object(a.isset)(l)&&t!==l){const e=36e5*(l&&!t?1:-1);l=t,d+=e,m=new Date(d)}l=t}let f=1;if(tt(Z(m),Z(t))){f=(Z(Q(m,1)).getTime()-t.getTime())/s}else if(tt(Z(m),Z(e)))f=1-h;else{const t=Z(m);f=(Q(m,1).getTime()-t.getTime())/s}f=Math.min(1,Math.max(f,0));const w=b>=10?c.date:c.day,j=f*n<100?w:c.dateFull,O=Object(a.formatDate)(m,j);let x=Math.round(100*f*100)/100;x=Math.min(f*n,n),p+=x,0===_||_===b||_>0&&p>=g?(i.append('<div class="awxjs__ui-timeline__periods-item" style="left:'.concat(o,"px;width:").concat(p,'px;"><span>').concat(p>=g-10?r||O:"&nbsp;","</span></div>")),o+=p,p=0,r=void 0):Object(a.isset)(r)||(r=O),d+=864e5,h+=f,u+=x,_+=1}}else{const t=Object(a.formatDate)(e,c.dateFull);i.append('<div class="awxjs__ui-timeline__periods-item" style="left:'.concat(o,"px;width:").concat(n,'px;"><span>').concat(t,"</span></div>"))}}_setupSliderTicks(t,e){const s=e.getTime()-t.getTime(),i={second:1e3,minute:6e4,hour:36e5,day:864e5};i.minute5=5*i.minute,i.minute10=10*i.minute,i.minute15=15*i.minute,i.minute30=30*i.minute,i.hour2=2*i.hour,i.hour3=3*i.hour,i.hour6=6*i.hour,i.hour12=12*i.hour,i.day2=2*i.day,i.day3=3*i.day,i.day7=7*i.day,i.month=30*i.day,i.year=365*i.day,i.decade=10*i.year;let n=this.ui.periods.width();if(this._slider){const t=this._slider.indicatorSize();n-=t.width}if(this._slider){const o=t.getTime(),c=e.getTime();let r=(t=>{let e=0;return Object.keys(i).map((t=>i[t])).sort(((t,e)=>t-e)).forEach((s=>{n/(t/s)>=40&&0===e&&(e=s)})),e})(c-o);let l=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),h=!1;l%r!=0&&r%i.day==0&&(l+=i.day,h=!0),h&&(r=i.day);const d={};for(;l<=c;){l>=o&&(d[(l-o)/s]=h?"":Object(a.formatDate)(new Date(l),this.opts.formatters.time||"h:mm")),l+=r}this._slider.setTicks(d)}}};var it=class extends u{constructor(t,e){super(Object(a.extend)({className:"app__ui-panel-timeline".concat(Object(a.isEmpty)(e.className)?"":" ".concat(e.className)),range:{},formatters:{time:"h:mm a",day:"EEE, MMM d"},ui:{left:".awxjs__app__ui-panel-timeline-left",center:".awxjs__app__ui-panel-timeline-center",right:".awxjs__app__ui-panel-timeline-right",controls:".awxjs__app__ui-panel-timeline-center",timeline:".awxjs__app__ui-panel-timeline-right",play:".awxjs__ui-btn-play",now:".awxjs__ui-btn-now",time:".awxjs__app__ui-panel-timeline-daytime",settings:".awxjs__ui-btn-settings"},icon:'\n\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 96.3 85.4">\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<path d="M75.2,39.9h9.4v5.2h-9.4L75.2,39.9z"/>\n\t\t\t\t\t\t<path d="M49,64.9h5.2v9.4H49V64.9z"/>\n\t\t\t\t\t\t<path d="M65.5,24.9l6.6-6.6l3.7,3.7l-6.6,6.6L65.5,24.9z"/>\n\t\t\t\t\t\t<path d="M69.2,56.5l6.6,6.6l-3.7,3.7l-6.6-6.6L69.2,56.5z"/>\n\t\t\t\t\t\t<path d="M36.6,56.7l12.4-12.4l0-25.1h8v28.3c-0.6,0.6-14.8,14.9-14.8,14.9L36.6,56.7z"/>\n\t\t\t\t\t\t<path d="M53.6,0v7.5c19.4,0,35.2,15.8,35.2,35.2c0,19.4-15.8,35.2-35.2,35.2c-17.8,0-32.6-13.3-34.9-30.5l5.4,5.3l5.3-5.3\n\t\t\t\t\t\t\tL14.7,32.7L0,47.4l5.3,5.3l5.8-5.8c2.1,21.6,20.4,38.5,42.5,38.5c23.5,0,42.7-19.2,42.7-42.7S77.1,0,53.6,0L53.6,0z"/>\n\t\t\t\t\t</g>\n\t\t\t\t</svg>\n\t\t\t'},e)),this._activityCount=0;const s=Object(a.get)(e,"range.marks"),i=Object(c.i)();this._animation=t,this._timeline=new st(t),this._indicator=new p.a({size:30,strokeWidth:2}),this._slider=new y(Object(a.extend)({title:"Time Range <span>(hours)</span>",width:"compact"===i.width?200:300,value:[-6,0],range:{min:-24,max:24},marksEvery:Object(a.get)(e,"range.marksEvery")||"% 12",marks:s||{0:"Now"},step:"compact"===i.width?6:2,tooltip:t=>{if(0===t)return"Now";return"".concat(t>0?"+":"").concat(t," hours")}},this.opts.range))}close(){super.close(),this._tooltip&&this._tooltip.hide()}setFormatters(t){this.opts.formatters=Object(a.extend)({},this.opts.formatters,t),Object(a.isset)(this._time)&&this._setTime(this._time),this._timeline.setFormatters({time:this.opts.formatters.time})}setSize(t,e){const s=this.ui.content.padding(),i=this.ui.left.outerWidth(!0),n=this.ui.center.outerWidth(!0);this.ui.right.outerWidth(!0);let a=t;a-=s.left+s.right,a-=i+n;const o=this._timeline.$el.margins();a-=o.left+o.right,a-=20,a=Math.floor(a);this._timeline.size().width!==a&&(a<200?(this.ui.settings.hide(),this._timeline.hide()):(this.ui.settings.show(),this._timeline.show(),this._timeline.setSize(a,0)))}showLoading(t){const e=t?1:-1;this._activityCount=Math.max(0,this._activityCount+e),this._activityCount>0?this._indicator.startAnimating():this._indicator.stopAnimating()}_render(){return'\n\t\t\t<div class="awxjs__app__ui-panel-timeline">\n\t\t\t\t<div class="awxjs__app__ui-panel-container">\n\t\t\t\t\t<div class="awxjs__app__ui-panel-toolbar">\n\t\t\t\t\t\t'.concat(this.opts.title?'<div class="awxjs__app__ui-panel-title">'.concat(this.opts.title,"</div>"):"",'\n\t\t\t\t\t\t<button class="awxjs__app__ui-panel-close">\n\t\t\t\t\t\t\t<svg version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t\t<path d="m22.699 77.301c0.80078 0.80078 1.8008 1.1992 2.8008 1.1992s2-0.39844 2.8008-1.1992l21.699-21.602 21.699 21.699c0.80078 0.80078 1.8008 1.1992 2.8008 1.1992s2-0.39844 2.8008-1.1992c1.6016-1.6016 1.6016-4.1016 0-5.6992l-21.602-21.699 21.699-21.699c1.6016-1.6016 1.6016-4.1016 0-5.6992-1.6016-1.6016-4.1016-1.6016-5.6992 0l-21.699 21.699-21.699-21.602c-1.6016-1.6016-4.1016-1.6016-5.6992 0-1.6016 1.6016-1.6016 4.1016 0 5.6992l21.699 21.602-21.602 21.699c-1.5977 1.5-1.5977 4.1016 0 5.6016z"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="awxjs__app__ui-panel-content">\n\t\t\t\t\t\t<div class="awxjs__ui-cols align-center">\n\t\t\t\t\t\t\t<div class="awxjs__app__ui-panel-timeline-left">\n\t\t\t\t\t\t\t\t<div class="awxjs__app__ui-panel-timeline-daytime"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="awxjs__app__ui-panel-timeline-center">\n\t\t\t\t\t\t\t\t<div class="awxjs__app__ui-panel-timeline-controls awxjs__ui-row align-center">\n\t\t\t\t\t\t\t\t\t<button class="awxjs__ui-btn awxjs__ui-btn-icon awxjs__ui-btn-play">\n\t\t\t\t\t\t\t\t\t\t<svg width="100pt" height="100pt" version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t\t\t\t\t<path transform="scale(.3003)" d="m260 166.99l-93.006 54.008-93.994 52.994v-214.99l93.994 53.995zm0 0" fill-rule="evenodd" />\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button class="awxjs__ui-btn awxjs__ui-btn-now">Now</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="awxjs__app__ui-panel-timeline-right"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="awxjs__ui-btn-icon awxjs__ui-btn-settings">\n\t\t\t\t\t\t\t<svg version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t\t<path d="m94.801 40.801-10.602-1.8008c-0.60156-1.8984-1.3984-3.6992-2.3008-5.5l6.1992-8.6992c0.89844-1.3008 0.80078-3.1016-0.30078-4.1992l-8.5-8.5c-1.1016-1.1016-2.8984-1.3008-4.1992-0.30078l-8.6992 6.1992c-1.6992-0.89844-3.6016-1.6992-5.5-2.3008l-1.6992-10.5c-0.30078-1.6016-1.6016-2.6992-3.1992-2.6992h-12c-1.6016 0-2.8984 1.1016-3.1992 2.6992l-1.8008 10.602c-1.8984 0.60156-3.6992 1.3984-5.5 2.3008l-8.6992-6.1992c-1.3008-0.89844-3.1016-0.80078-4.1992 0.30078l-8.5 8.5c-1.1016 1.1016-1.3008 2.8984-0.30078 4.1992l6.1992 8.6992c-0.89844 1.6992-1.6992 3.6016-2.3008 5.5l-10.5 1.6992c-1.6016 0.30078-2.6992 1.6016-2.6992 3.1992v12c0 1.6016 1.1016 2.8984 2.6992 3.1992l10.602 1.8008c0.60156 1.8984 1.3984 3.6992 2.3008 5.5l-6.1992 8.6992c-0.89844 1.3008-0.80078 3.1016 0.30078 4.1992l8.5 8.5c1.1016 1.1016 2.8984 1.3008 4.1992 0.30078l8.6992-6.1992c1.6992 0.89844 3.6016 1.6992 5.5 2.3008l1.8008 10.602c0.30078 1.6016 1.6016 2.6992 3.1992 2.6992h12c1.6016 0 2.8984-1.1016 3.1992-2.6992l1.6992-10.703c1.8984-0.60156 3.6992-1.3984 5.5-2.3008l8.6992 6.1992c1.3008 0.89844 3.1016 0.80078 4.1992-0.30078l8.5-8.5c1.1016-1.1016 1.3008-2.8984 0.30078-4.1992l-6.1992-8.6992c0.89844-1.6992 1.6992-3.6016 2.3008-5.5l10.602-1.8008c1.6016-0.30078 2.6992-1.6016 2.6992-3.1992v-11.898c-0.10156-1.6016-1.2031-2.8984-2.8008-3.1992zm-44.801 26.301c-9.5 0-17.102-7.6992-17.102-17.102 0-9.5 7.6992-17.102 17.102-17.102 9.3984 0 17.102 7.6016 17.102 17.102s-7.6016 17.102-17.102 17.102z"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="awxjs__app__ui-panel-toggle">').concat(this.opts.icon,"</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")}_onAddedToDOM(){super._onAddedToDOM(),this._timeline.addTo(this.ui.timeline),this._indicator.appendTo(this.ui.timeline),this._setTime(this._animation.currentTime)}_setupEvents(){super._setupEvents(),this._animation.on("load:start play",(()=>{this.ui.play.html('\n\t\t\t\t<svg width="100pt" height="100pt" version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t<path d="m76.5 15h-53c-4.6875 0-8.5 3.8125-8.5 8.5v53c0 4.6875 3.8125 8.5 8.5 8.5h53c4.6875 0 8.5-3.8125 8.5-8.5v-53c0-4.6875-3.8125-8.5-8.5-8.5z"/>\n\t\t\t\t</svg>\n\t\t\t')})).on("stop",(()=>{this.ui.play.html('\n\t\t\t\t<svg width="100pt" height="100pt" version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t<path transform="scale(.3003)" d="m260 166.99l-93.006 54.008-93.994 52.994v-214.99l93.994 53.995zm0 0" fill-rule="evenodd" />\n\t\t\t\t</svg>\n\t\t\t')})).on("advance",(t=>{const{time:e}=t.data;e&&this._setTime(e)})).on("start:change end:change",(()=>{this._slider.value=[this._animation.startOffset()/36e5,this._animation.endOffset()/36e5],this.trigger("change:range",{start:this._animation.startDate(),end:this._animation.endDate()})})),this._indicator&&this._animation.on("load:start",(()=>{this.showLoading(!0)})).on("load:done",(()=>{this.showLoading(!1)})),this._timeline.slider.on("change",(t=>{const{progress:e}=t.data;if(Object(a.isset)(e)){const t=this._animation,s=t.endDate().getTime()-t.startDate().getTime(),i=Math.round(t.startDate().getTime()+s*e);this._setTime(i)}})),this._slider.on("change:end",(t=>{const[e,s]=t.data.value;this._animation.setStartOffset(3600*e*1e3),this._animation.setEndOffset(3600*s*1e3)})),this.ui.play.on("click",(()=>{this._animation.isAnimating()||this._animation.isLoading()?this._animation.stop():this._animation.play()})),this.ui.now.on("click",(()=>{this._animation.goToInit()})),this.ui.settings&&this.ui.settings.on("click",(()=>{if(!this._tooltip){this._slider.initialize();const t=new w(this._slider.$el,{showClose:!0});t.attachTo(this.ui.settings),this._tooltip=t}this._tooltip.visible?this._tooltip.hide():this._tooltip.show()}))}_setTime(t){if(this._time=t,!this.ui.time)return;const e=new Date(t);this.ui.time.html('\n\t\t\t<div class="awxjs__app__ui-panel-timeline-time">'.concat(Object(a.formatDate)(e,this.opts.formatters.time),'</div>\n\t\t\t<div class="awxjs__app__ui-panel-timeline-day">').concat(Object(a.formatDate)(e,this.opts.formatters.day),"</div>\n\t\t"))}},nt=s("CVtS");var at=class extends u{get legend(){return this._legendView}constructor(t){(t=Object(a.extend)({legend:{size:{width:300,height:0}},icon:'\n\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 90 90">\n\t\t\t\t\t<g>\n\t\t\t\t\t\t<path d="M45,9c19.9,0,36,16.1,36,36S64.9,81,45,81S9,64.9,9,45C9,25.1,25.1,9,45,9 M45,0C20.1,0,0,20.1,0,45s20.1,45,45,45\n\t\t\t\t\t\t\ts45-20.1,45-45C90,20.1,69.9,0,45,0z"/>\n\t\t\t\t\t\t<path d="M48.7,29.3c0,1-0.4,1.9-1.1,2.7c-0.7,0.7-1.6,1.1-2.6,1.1c-0.5,0-0.9-0.1-1.4-0.3c-0.4-0.2-0.8-0.5-1.2-0.8\n\t\t\t\t\t\t\tc-0.3-0.3-0.6-0.7-0.8-1.2c-0.2-0.5-0.3-0.9-0.3-1.5c0-0.5,0.1-0.9,0.3-1.3c0.2-0.4,0.5-0.8,0.8-1.2c0.3-0.3,0.7-0.6,1.2-0.8\n\t\t\t\t\t\t\tc0.4-0.2,0.9-0.3,1.4-0.3s0.9,0.1,1.4,0.3c0.4,0.2,0.8,0.5,1.2,0.8c0.4,0.3,0.6,0.7,0.8,1.1C48.6,28.3,48.7,28.8,48.7,29.3\n\t\t\t\t\t\t\tL48.7,29.3z M48.3,59.8c0,1.1-0.3,2-0.9,2.6c-0.6,0.7-1.4,1-2.4,1s-1.8-0.3-2.4-1c-0.6-0.7-0.9-1.5-0.9-2.6v-18\n\t\t\t\t\t\t\tc0-1.1,0.3-2,0.9-2.6c0.6-0.7,1.4-1,2.4-1s1.8,0.3,2.4,1c0.6,0.7,0.9,1.5,0.9,2.6V59.8z"/>\n\t\t\t\t\t</g>\n\t\t\t\t</svg>\n\t\t\t'},t)).className=Object(a.isset)(t.className)?"app__ui-panel-legends ".concat(t.className):"app__ui-panel-legends";const e=Object(a.get)(t,"legend.size");e&&Object(a.set)(t,"legend.size.width",Math.min(e.width,(document&&window?{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}:null).width)),super(t)}open(){0!==this._legendView.count&&super.open()}contentSize(){const t=super.contentSize(),e=this._legendView.getSize(),s=this.getContentContainer();t.height=Math.min(e.height,s.outerHeight(!0));const i=s.padding();return t.height+=i.top+i.bottom,t}_onAddedToDOM(){super._onAddedToDOM(),this.$el.addClass("awxjs__app__ui-panel-legends"),this._legendView||(this._legendView=new nt.a(this.ui.content,Object(a.extend)({styles:{label:{color:"#ffffff"}}},this.opts.legend))),0===this._legendView.count&&this.hide()}_setupEvents(){super._setupEvents(),this._legendView.on("add remove",(t=>{const{count:e}=t.data;0===e?(this.close(),this.hide()):this.show()})).on("resize",(t=>{this._layout()}))}};var ot=class extends h{get value(){return this.ui.input.val()}set value(t){this.ui.input.val(t),this.ui.input.trigger("input")}constructor(t){t=t||{},(t=Object(a.extend)({placeholder:"Search",autocomplete:!0,autoselect:!0,ui:{form:".awxjs__ui-searchfield-form > form",input:".awxjs__ui-searchfield-form input",submit:".awxjs__ui-searchfield-form button",results:".awxjs__ui-searchfield-results"}},t,{className:t.className?"ui-searchfield ".concat(t.className):"ui-searchfield"})).id=t.id||t.value,super(t),this._selectedIndex=-1,this._indicator=new p.a({size:30,strokeWidth:2})}setResults(t){this.clear(),Object(a.isArray)(t)||(t=[t]),this._results=Object(a.cloneDeep)(t),this._renderResults(t)}reset(){this.clear(),this.ui.input.val(""),this.ui.results.hide(),Object(r.a)(document).off("click",this._docHandler)}clear(){this.ui.results.empty(),this._results=null,this._selectedIndex=-1,this.$el.removeClass("awxjs__ui-searchfield-expanded")}focus(){this.ui.input.focus()}blur(){this.ui.input.blur()}_render(t){return'\n\t\t\t<div class="awxjs__ui-searchfield">\n\t\t\t\t<div class="awxjs__ui-searchfield-container">\n\t\t\t\t\t<div class="awxjs__ui-searchfield-form">\n\t\t\t\t\t\t<form method="POST">\n\t\t\t\t\t\t\t<input type="text" value="" placeholder="'.concat(this.opts.placeholder,'">\n\t\t\t\t\t\t\t<button>\n\t\t\t\t\t\t\t\t<svg version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t\t\t<path d="m69.777 61.273 26.562 26.562c4.25 4.3672-4.1328 12.75-8.5 8.5l-26.562-26.562c-14.641 10.508-35.066 8.9727-47.934-3.8945-14.523-14.523-14.523-38.016 0-52.539 14.523-14.523 38.016-14.523 52.539 0 12.867 12.867 14.402 33.293 3.8945 47.934zm-48.051-39.551c-9.8008 9.918-9.8008 25.855 0 35.656 9.918 9.918 25.855 9.918 35.656 0 9.918-9.8008 9.918-25.738 0-35.656-9.8008-9.8008-25.738-9.8008-35.656 0z" fill-rule="evenodd"/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="awxjs__ui-searchfield-results"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t')}_onAddedToDOM(){super._onAddedToDOM(),this._indicator.appendTo(this.ui.form)}_setupEvents(){super._setupEvents();const t=this.ui.input,e=Object(a.debounce)((()=>{const e=t.val();this.trigger("change:value",{value:e}),e.length>3?this._search(t.val()):0===e.length?this.reset():this._renderResults([])}),300);this._docHandler=t=>{this._handleDocClick(t)},this._keyHandler=t=>{this._listenForKeys(t)},this.opts.autocomplete?t.on("input",e):t.on("input",(e=>{(""===t.val()||this._results&&this._results.length>0)&&this.reset()})),this.ui.form.on("submit",(e=>(e.preventDefault(),this._search(t.val()),this.trigger("submit",{value:t.val()}),!1))),this.ui.submit.on("click",(e=>{e.preventDefault();const s=t.val();Object(a.isEmpty)(s)||(this._search(s),this.trigger("submit",{value:s}))})),t.on("focus",(t=>{this.$el.addClass("awxjs__ui-searchfield-focused"),Object(r.a)(document).off("keyup keypress",this._keyHandler),Object(r.a)(document).on("keyup keypress",this._keyHandler),Object(r.a)(document).off("click",this._docHandler),Object(r.a)(document).on("click",this._docHandler)})),t.on("blur",(t=>{this.$el.removeClass("awxjs__ui-searchfield-focused"),Object(r.a)(document).off("keyup keypress",this._keyHandler)}))}_search(t){const e=Object(a.get)(this.opts,"data.request");e?Object(a.isFunction)(e)&&(this._indicator.startAnimating(),e(t).then((t=>{this._indicator.stopAnimating(),this.setResults(t)}))):console.error("No request task defined for SearchField, check your component configuration.")}_renderResults(t){if(this.trigger("update:results",t),t){if(0===t.length)return this.ui.results.hide(),void this.$el.removeClass("awxjs__ui-searchfield-expanded");const e=Object(a.get)(this.opts,"data.formatter"),s=t.map(((t,s)=>'<li data-result="'.concat(s,'">').concat(e(t),"</li>")));this.ui.results.html("<ul>".concat(s.join(""),"</ul>")),this.$el.addClass("awxjs__ui-searchfield-expanded"),Object(r.a)("li",this.ui.results).on("click",(t=>{this._handleResultClick(t)})).on("mouseover",(t=>{this._handleResultMouseover(t)})),this.ui.results.show(),s.length>0&&this.opts.autoselect&&this._selectResultAtIndex(0)}else this.reset()}_handleResultMouseover(t){const e=Object(r.a)(t.target),s=parseInt(e.data("result"),10);this._selectResultAtIndex(s)}_handleResultClick(t){const e=Object(r.a)(t.target),s=parseInt(e.data("result"),10);this.trigger("select",{result:Object(a.cloneDeep)(this._results[s]),index:s}),this.reset()}_selectResultAtIndex(t){if(t!==this._selectedIndex){const e=Object(r.a)("li",this.ui.results);e.removeClass("selected"),t>=0&&e.eq(t).addClass("selected"),this._selectedIndex=t}}_handleDocClick(t){const e=Object(r.a)(t.target).closest(".awxjs__ui-searchfield-container");e&&0!==e.length||this.reset()}_listenForKeys(t){const e=(t.key||"").toLowerCase();if("keypress"===t.type)"enter"!==e&&13!==t.keyCode||(t.preventDefault(),this.opts.autocomplete||this._results&&this._results.length>0?(this.trigger("key:enter"),this._selectedIndex>-1&&this._results&&(this.trigger("select",{result:Object(a.cloneDeep)(this._results[this._selectedIndex]),index:this._selectedIndex}),this.reset())):this._search(this.ui.input.val()));else if("keyup"===t.type)if("escape"===e||"esc"===e||27===t.keyCode)this.trigger("key:escape"),this.reset();else if(40===t.keyCode){let t=this._selectedIndex;this._results&&t<this._results.length-1?t+=1:-1===t&&(t=0),this._selectResultAtIndex(t)}else if(38===t.keyCode){let t=this._selectedIndex;t>0&&(t-=1),this._selectResultAtIndex(t)}}};var ct=class extends u{get field(){return this._field}constructor(t){(t=Object(a.extend)({field:{placeholder:"Search for place...",data:{request:t=>new Promise(((e,s)=>{this._prepareServiceForQuery(t),this._service.get().then((t=>{let s=t.data||{};if(s.responses){let t=[];s.responses.forEach((e=>{e.response&&(t=t.concat(e.response))})),s=t}e(s)})).catch((t=>{s(t)}))})),formatter:t=>{if(!t)return null;if(!t.place)return null;const e=[Object(o.ucwords)(t.place.name)];"US"===t.place.country?e.push(t.place.state.toUpperCase()):e.push(Object(o.ucwords)(t.place.countryFull));let s=e.join(", ");return t.type&&"airport"===t.type&&(s+=" (Airport)"),s}}},icon:'\n\t\t\t\t<svg version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t<path d="m69.777 61.273 26.562 26.562c4.25 4.3672-4.1328 12.75-8.5 8.5l-26.562-26.562c-14.641 10.508-35.066 8.9727-47.934-3.8945-14.523-14.523-14.523-38.016\n\t\t\t\t\t\t0-52.539 14.523-14.523 38.016-14.523 52.539 0 12.867 12.867 14.402 33.293 3.8945 47.934zm-48.051-39.551c-9.8008 9.918-9.8008 25.855 0 35.656 9.918 9.918\n\t\t\t\t\t\t25.855 9.918 35.656 0 9.918-9.8008 9.918-25.738 0-35.656-9.8008-9.8008-25.738-9.8008-35.656 0z" fill-rule="evenodd"/>\n\t\t\t\t</svg>\n\t\t\t'},t)).className=t&&t.className?"app__ui-panel-search ".concat(t.className):"app__ui-panel-search",super(t),this._account=this.opts.account}_onAddedToDOM(){super._onAddedToDOM(),this._field||(this._field=new ot(this.opts.field)),this._field.addTo(this.ui.content)}_setupEvents(){super._setupEvents(),this._field.on("select",(t=>{this.trigger("select",t.data)})).on("change:value",(t=>{this.trigger("change:value",t.data)})).on("update:results",(t=>{this.trigger("update:results",t.data)}))}_prepareServiceForQuery(t){this._service||(this._service=this._account.api());const e=this._service;if(e.removeAllRequests(),e.resetParams(),0!==(t=(t=(t=t.replace(/^\s+/,"").replace(/\s+$/,"")).replace(/,\s+/,",")).replace(/,$/,"")).length)if(/^(-?[\d\.]+),\s*(-?[\d\.]+)$/.test(t)){const s=this._account.api().endpoint("places").action("closest").place(t);e.addRequest(s)}else if(/^(\d\d\d\d\d(?:-\d\d\d\d)?|[ABCEGHJKLMNPRSTVXY]\d[A-Z] ?\d[A-Z]\d)$/i.test(t)){const s=this._account.api().endpoint("places").place(t);e.addRequest(s)}else{if(/^\w{4}$/.test(t)){const s=this._account.api().endpoint("places").place(t);e.addRequest(s)}const s=t.split(",");if(s.length>1){if(t="name:".concat(s[0],";altname:").concat(s[0]),3===s.length)t+=",state:".concat(s[1],",country:").concat(s[2]);else if(2===s.length&&s[1].length>0){const e=s[1],i=[];let n=!1;if(e.length>1){const t=Object(o.states)(),s=Object(o.countries)(),c=Object(a.extend)({},t.us,t.ca),r=new RegExp("^".concat(e),"i");Object.keys(c).forEach((t=>{r.test(c[t])&&(i.push(t),n=!0)})),n||Object.keys(s).forEach((t=>{r.test(s[t])&&i.push(t)}))}t+=",state:^".concat(e,";country:^").concat(e),i.length>0&&i.forEach((e=>{t+=n?";state:^".concat(e):";country:^".concat(e)}))}}else t="name:^".concat(s[0],";altname:^").concat(s[0]);const i=this._account.api().endpoint("places").action("search").query(t).limit(20).sort("pop:-1,haszip:-1");e.addRequest(i)}else this._field.setResults([])}},rt=function(t,e){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(s[i[n]]=t[i[n]])}return s};const lt=(t,e)=>Object(a.extend)({},t,e);class ht extends i.a{get sourceIds(){return this._sourceIds}constructor(t){super(),this._sourceIds=[],this._moduleLegendCache={},this._app=t,this._modules={}}add(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Object(a.isset)(t))if(Object(a.has)(t,"id")&&Object(a.has)(t,"load"))this.addGroup(t,e);else if(Object(a.isFunction)(t))t().then((t=>{t=t.default||t,Object(a.isPlainObject)(t)?console.error("[Aeris] Module is not a valid class."):this.add(new t(s),e)})).catch((t=>{console.error("[Aeris] Failed to load built-in module",t)}));else{if(Object(a.isEmpty)(t.id))throw new Error("[Aeris] Map modules must provide a unique identifier using the `id` property.");if(!1===Object(a.has)(t,"initialize"))throw new Error("[Aeris] Cannot add invalid map module ".concat(t.id,". Modules must implement the IMapSourceModule interface and its required methods."));this._modules[t.id]=t,t.initialize(this._app.account,this._app),this._onAppReady((()=>{const{source:s,controls:i,legend:n,infopanel:o}=e||{},c=Object(a.extend)({},t.source(),Object(a.isFunction)(s)?s():s),r=Object(a.extend)({},t.legend(),n),l=Object(a.extend)({},t.infopanel(),o),h=lt(t.controls(),i);if(!Object(a.isset)(c)||Object(a.isEmpty)(c))throw new Error("[Aeris] Cannot add map module ".concat(t.id,", a valid map content source was not provided."));t.group||this._setupControls(t.id,h),this._setupLegends(t.id,r),this._setupInfoPanel(t.id,l);const d=this._setupSource(t.id,c);t.dataSource=d,this._setupModuleEvents(t),this.trigger("module:load",{id:t.id,module:t});const u=this._app.initialLayers(),p=this._app.panels.layers;if(p&&(null==u?void 0:u.length)>0){p.buttonForId(t.id)&&p.select(u)}}))}else console.error("[Aeris] Invalid module specified, received ".concat(t))}insertAt(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const n=Object.assign({},s);if(Object(a.isFunction)(n.controls)){const e=n.controls;n.controls=s=>Object.assign(Object.assign({},e(s)),{index:t})}else n.controls=Object(a.extend)({},n.controls,{index:t});this.add(e,n,i)}addGroup(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e=e||{},t.load().then((s=>{Object(a.has)(t,"initialize")&&t.initialize(this._app.account,this._app),this._onAppReady((()=>{const s=t.controls();if(s){const{controls:i}=e;let n=i;n=Object(a.isFunction)(i)?i(s):lt(s,i),this._setupControls(t.id,n)}this._setupGroupEvents(t)}));const i=e.modules||{};s.forEach((e=>{e.group=t,this.add(e,i[e.id])}))})).catch((t=>{console.error("[Aeris] Module group failed to load - ERROR",t)}))}remove(t){const e=this._app.map,s=e.getSourceForId(t.id);s&&e.removeSource(s),delete this._modules[t.id],this.trigger("module:unload",{id:t.id,module:t})}removeById(t){let e;Object.keys(this._modules).forEach((s=>{s===t&&(e=this._modules[s])})),e&&this.remove(e)}_onAppReady(t){t&&(this._app.isReady()?t():this._app.on("ready",(()=>t())))}_setupSource(t,e){if(e){const{type:s}=e,i=rt(e,["type"]);return this._app.addSource(t,s,i)}throw new Error("[Aeris] Cannot add module ".concat(t,", source is invalid."))}_setupControls(t,e){if(!e)return;const s=this._app.panels.layers;if(s){const i=e.index,n=Object(a.extend)({},e,{id:t}),o=[];Array.isArray(n.buttons)?n.buttons.forEach((t=>{t.options=Object.assign(Object.assign({},t.options),{module:!0}),o.push(t.id||t.value)})):(n.options=Object.assign(Object.assign({},n.options),{module:!0}),o.push(n.id||n.value)),this._sourceIds.push(...o),Object(a.isset)(i)?(delete n.index,s.insertAt(i,n)):s.add(n)}}_setupLegends(t,e){if(!e)return;const s=this._app.panels.legends;if(s){const i=this._app.map,n=this._app.getPanel("layers"),o=t=>{s.legend.remove(this._moduleLegendCache[t]),delete this._moduleLegendCache[t]},c=i=>{const{title:n,url:c,code:r}=Object(a.isset)(e.get)&&Object(a.isFunction)(e.get)?e.get():e;r!==this._moduleLegendCache[i]&&(o(i),Object(a.isset)(r)?(s.legend.add(r,{account:this._app.account,within:{bounds:this._app.map.getBounds()},title:n}),this._moduleLegendCache[t]=r):Object(a.isset)(c)&&(s.legend.add(t,{type:"image",title:n,url:c}),this._moduleLegendCache[t]=t))};i.on("source:add",(e=>{const s=Object(a.get)(e.data,"id");t===s&&c(t)})).on("source:remove",(e=>{const s=Object(a.get)(e.data,"id");t===s&&o(t)})),n&&n.on("change",(e=>{const s=Object(a.get)(e.data,"id");t===s&&c(t)}))}}_setupInfoPanel(t,e){if(!e)return;const{sections:s,view:i}=e,n=this._app.panels.info;n&&(s||i?(s&&Object.keys(s).forEach((t=>K.setSection(t,s[t]))),i&&n.setContentView(t,i)):n.setContentView(t,e))}_setupModuleEvents(t){const e=this._app.map;Object(a.has)(t,"onAdd")&&e.on("source:add",(e=>{Object(a.get)(e.data,"id")===t.id&&t.onAdd()})),Object(a.has)(t,"onRemove")&&e.on("source:remove",(e=>{Object(a.get)(e.data,"id")===t.id&&t.onRemove()})),Object(a.has)(t,"onMarkerClick")&&e.on("marker:click",(e=>{const s=e.data.marker,i=e.data.data||{};i.awxjs_source===t.id&&t.onMarkerClick(s,i)})),Object(a.has)(t,"onShapeClick")&&e.on("shape:click",(e=>{const s=e.data.shape,i=e.data.data||{};i.awxjs_source===t.id&&t.onShapeClick(s,i)})),Object(a.has)(t,"onInit")&&t.onInit()}_setupGroupEvents(t){const e=this._app.map,s=t.modules.map((t=>t.id)),i=t.controls();i&&i.buttons&&(i.buttons||[]).forEach((t=>{const e=t.id||t.value;-1===s.indexOf(e)&&s.push(e)})),Object(a.has)(t,"onMarkerClick")&&e.on("marker:click",(e=>{const i=e.data.marker,n=e.data.data||{},a=n.awxjs_source;s.indexOf(a)>=0&&t.onMarkerClick(i,n)})),Object(a.has)(t,"onShapeClick")&&e.on("shape:click",(e=>{const i=e.data.shape,n=e.data.data||{},a=n.awxjs_source;s.indexOf(a)>=0&&t.onShapeClick(i,n)})),Object(a.has)(t,"onInit")&&t.onInit()}}var dt,ut=ht,pt=s("l1hk"),_t=s("gqGf"),gt=s("Hz+P");!function(t){t.Select="select",t.Deselect="deselect",t.Change="change"}(dt||(dt={}));class mt extends i.a{constructor(t,e){super(),this.storedSources={},this.sourceState={},this.respondToSourceEvents=!0,this.app=t,this.linkPanel(e),this.setupEvents()}get map(){return this.app.map}get sources(){return this.storedSources}linkPanel(t){this.panel!==t&&(this.panel&&this.panel.off("select",this.handleSelect).off("deselect",this.handleDeselect).off("change",this.handleOptionChange),this.panel=t,this.panel.on("select",this.handleSelect.bind(this)).on("deselect",this.handleDeselect.bind(this)).on("change",this.handleOptionChange.bind(this)).on("control:change",(t=>{const{key:e,valueSegments:s,control:i={}}=t.data||{};if("opacity"===i.id){let t=this.findSource(e);if(s&&s.forEach((e=>{const s=this.findSource(e.key,e.value);s&&(t=s)})),t&&(t instanceof _t.c||t instanceof _t.d)){const s=i.value/100;t.setOpacity(s),this.setSourceState(e,{style:{opacity:s}})}}this.trigger("change:control",t.data)})))}getSource(t){return this.sources[t]}findSource(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=this.getSource(t);if(s||(s=this.map.getSourceForId(t)),s||(s=this.map.getSourceForLayer(t)),!s&&Object(a.isString)(e)&&(s=this.findSource(e)),!s&&!0===/\:\:/.test(t)){const i=Object(gt.c)(t||e);s=this.findSource(i)}return s}addSource(t,e){this.sources[t]=e}setSourceState(t,e){this.sourceState[t]=Object.assign(Object.assign({},this.sourceState[t]),e)}handleSourceEvent(t,e){if(this.respondToSourceEvents)switch(t){case"add":this.panel.select(e,!0);break;case"remove":this.panel.deselect(e,!0)}}handleSelect(t){const{changed:e}=this.handleAction(dt.Select,t.data);e&&this.trigger("select",Object.assign({},t.data))}handleDeselect(t){const{changed:e}=this.handleAction(dt.Deselect,t.data);e&&this.trigger("deselect",Object.assign({},t.data))}handleOptionChange(t){const{id:e,value:s,reload:i,filter:n=!1,currentSegments:o}=t.data||{};if(!s)return;if(!1===this.map.hasSource(e)&&s.filters)return void this.panel.trigger("select",t.data);if(this.handleAction(dt.Change,Object.assign({},t.data))){let c=(t=>{const e={};return Object(a.isPlainObject)(t)?Object.keys(t).forEach((s=>{const i=t[s];e[s]=Object(a.isPlainObject)(i)?null==i?void 0:i.value:i})):Object(a.isArray)(t)&&t.length>0?e.filter=t.join(";"):Object(a.isString)(t)&&(e.filter=t),"all"===e.filter&&(e.filter=""),e})(s);if(c.bounds=this.map.getBounds(),o&&o.forEach((t=>{var e,s,i;const n=null===(i=null===(s=null===(e=t.options)||void 0===e?void 0:e.data)||void 0===s?void 0:s.request)||void 0===i?void 0:i.parameters;n&&(c=Object(a.extend)({},c,n))})),this.trigger("change",Object.assign(Object.assign({},t.data),{params:c})),n){const t=this.findSource(e,s);t&&(c.filter=c.filter||s,Object(a.isset)(i)&&!0!==i?t.render():t.reload(c))}}}handleAction(t,e){const{id:s,key:i,value:n,previous:o,options:c,valueSegments:r,previousSegments:l,filter:h=!1}=e,d=["id","key","value","options"];if(!n)return{changed:!1,added:[],removed:[]};if(this.map.isReady()){let i=[],c=[];if(h||n.filters){if(t===dt.Deselect?c.push(Object(a.pick)(e,d)):i.push(Object(a.pick)(e,d)),t===dt.Change)return{changed:!0,added:i,removed:c}}else t===dt.Select?r?i=i.concat(r.map((t=>Object(a.pick)(t,d)))):i.push(Object(a.pick)(e,d)):t===dt.Deselect&&(r?c=c.concat(r.map((t=>Object(a.pick)(t,d)))):c.push(Object(a.pick)(e,d)));t===dt.Change&&(r||l?(r&&(i=i.concat(r.map((t=>Object(a.pick)(t,d))))),l&&(c=c.concat(l.map((t=>Object(a.pick)(t,d)))))):(c.push(Object.assign(Object.assign({},Object(a.pick)(e,d)),{value:o})),i.push(Object(a.pick)(e,d)))),t===dt.Select?c=[]:t===dt.Deselect&&(i=[]);const u=i.map((t=>t.key)),p=c.reduce(((t,e)=>(-1===u.indexOf(e.key)&&t.push(e),t)),[]);if(i.length>0||p.length>0){const t=i.map((t=>Object.assign(Object.assign({},t),{parentId:s}))),e=p.map((t=>Object.assign(Object.assign({},t),{parentId:s})));return this.updateSources(t,e),{changed:!0,added:i,removed:p}}}return{changed:!1,added:[],removed:[]}}updateSources(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const s=[],i=[];this.respondToSourceEvents=!1,e.forEach((t=>{const{id:e,key:s,value:n,options:a}=t,o=this.findSource(e,n);o&&(this.map.removeSource(o),i.push(o))})),t.forEach((t=>{const{id:e,key:i,parentId:o,value:c,options:r}=t,l=Object(a.extend)({},r,this.sourceState[e],this.sourceState[o]),h=Object(a.isArray)(c)?c.join(","):c;let d=this.findSource(e,h);d||(d=this.findSource(i,h)),d||-1===this.app.modules.sourceIds.indexOf(e)&&!0!==(null==r?void 0:r.module)?Object(H.isMapsGLLayer)(e)||Object(H.isMapsGLLayer)(h)||!0===(null==r?void 0:r.mapsgl)||(d?this.map.addSource(d,l):Object(a.isString)(h)&&(this.map.layerInfo.exists(h)||!1===l.validate)?(this.map.addLayer(h,Object.assign(Object.assign({},l),{id:e})),d=this.map.getSourceForLayer(e||h)):this.map.layerInfo.exists(e)&&(this.map.addLayer(e,Object.assign(Object.assign({},l),{id:e})),d=this.map.getSourceForLayer(e)),d?s.push(d):Object(n.b)(c)||console.warn("[Aeris] Cannot add map data source {".concat(e,"}, source not registered and/or not a valid Aeris Maps layer."))):this.trigger("error:module:add",Object.assign({},t))})),this.respondToSourceEvents=!0,this.trigger("source:change",{added:s,removed:i})}setupEvents(){this.on("source:change",(t=>{}))}}var vt=mt;class bt extends i.a{get account(){return this._account}get $el(){return this._target}get options(){return Object.assign({},this._opts)}get map(){return this._map}get panels(){return this._panels}get sources(){return this._sourceManager.sources}get modules(){return this._modules}constructor(t,e){var s;if(super(),s=this,this._ready=!1,this._modulesToAddOnLoad=[],this._layoutCache={},this._layout=Object(a.debounce)((function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||Object.keys(s._panels).forEach((t=>{const e=s._panels[t];if(e){const i=Object(a.get)(s._opts,"panels.".concat(t,".position"));i&&Object(a.isPlainObject)(i)&&("info"!==t&&e.layout(),i.pin?e.pinTo(i.pin,i.translate):Object(a.isset)(i.x)&&Object(a.isset)(i.y)&&e.moveTo(i))}}));const t=s.panels.layers,e=s.panels.timeline,i=s.panels.legends,n=s.$el.bounds(!0),o={top:0,left:0,right:n.right,bottom:n.height,width:n.width,height:n.height};let r=Object.assign({},o);if(e){const t=e.size(),i=10,{pin:l}=Object(a.get)(s._opts,"panels.timeline.position")||{};if(Object(c.f)(l)){r=Object(c.c)(o,i);const e={};t.width>=r.width?e.left="".concat(i,"px"):e.left="".concat(Math.floor((n.width-t.width)/2),"px"),s._layoutCache.timeline=e}}if(t){const l=t,h=l.contentSize(),d=l.bounds(!0,s.$el);let u=d.top;r=Object.assign({},o);const{pin:p,translate:_}=Object(a.get)(s._opts,"panels.layers.position")||{};Object(c.g)(p)&&(r.top=Math.max(0,Math.round((n.height-d.height)/2)),r.bottom=Math.min(n.height,r.top+r.height),u=_.y,u=Math.abs(_.y)),r=Object(c.a)(r,{width:d.width,height:d.height},p);const g=Object(c.c)(r,10);if(i){const{pin:t}=Object(a.get)(s._opts,"panels.legends.position")||{},e=i.bounds(!0,s.$el);Object(c.d)(g,e,!1)&&(Object(c.e)(t)?r.bottom=e.top:Object(c.h)(t)&&(r.top=e.bottom))}if(e){const{pin:t}=Object(a.get)(s._opts,"panels.timeline.position")||{},i=e.bounds(!0,s.$el);Object(c.d)(g,i,!1)&&(Object(c.e)(t)?r.bottom=i.top:Object(c.h)(t)&&(r.top=i.bottom))}r=Object(c.c)(r,u);let m=Math.max(r.bottom-r.top,0);0===m&&(m=o.bottom-o.top),m=Math.min(m,r.height)-t.toolbar.outerHeight();const v=(()=>{const t=document.createElement("div");t.style.height="100px",t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.width="100px",document.body.appendChild(t);const e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e})(),b={top:"".concat(r.top,"px"),height:"".concat(h.height,"px"),"max-height":"".concat(m,"px"),width:"".concat(h.width+v,"px")};l.setMaxContentSize({height:m,width:h.width+v}),l.content.css({"padding-right":"".concat(v,"px")}),s._layoutCache.layers=b}}),50),!t)throw new Error("[Aeris] Invalid DOM target specified for InteractiveMapApp");const i=Object(c.i)();if(e=Object(a.extend)((t=>({mode:"light",map:{},panels:{layers:{title:"Layers",enabled:!0,toggleable:"compact"===t.width,className:"app__ui-panel-layers",position:{pin:"topright",translate:{x:-10,y:10}}},timeline:{title:"Timeline",enabled:!0,position:{pin:"compact"===t.width?"bottomleft":"bottom",translate:{x:"compact"===t.width?10:0,y:-10}}},info:{enabled:!0,position:{pin:"topleft",translate:{x:10,y:10}},marker:{svg:{shape:{type:"circle",fill:{color:"#15a8e1"},stroke:{color:"#ffffff",width:2}}},size:[20,20]}},legends:{title:"Legends",enabled:!0,toggleable:!0,position:{pin:"bottomright",translate:{x:-10,y:-10}}},search:{title:"Location Search",enabled:!0,position:{pin:"top",translate:{y:10}}}}}))(i),{map:{account:e.account,servers:e.servers},panels:{search:{account:e.account}}},e),this._opts=e,this._account=e.account,!this.account)throw new Error("An InteractiveMapApp must be configured with a valid `account` value.");const o="awxjs__mode-".concat(this._opts.mode||"light");Object(r.a)(t).html('\n\t\t\t<div class="awxjs__app__component awxjs__app__fullscreen '.concat(o,'">\n\t\t\t\t<div class="awxjs__app__map"></div>\n\t\t\t</div>\n\t\t')),this._target=Object(r.a)(".awxjs__app__component",Object(r.a)(t)),this._panels={layers:null,info:null,timeline:null,legends:null,search:null},this._modules=new ut(this),this._modules.on("module:load",(t=>{const e=t.data.id,s=(this.initialLayers(),[]);this._modulesToAddOnLoad.forEach((t=>{(t.id===e||new RegExp("::".concat(e)).test(t.id))&&(this._sourceManager.updateSources([t],[]),s.push(t.key))})),this._modulesToAddOnLoad=this._modulesToAddOnLoad.filter((t=>!1===s.includes(t.key)))}));const{layers:l,info:h,timeline:d,search:u,legends:p}=e.panels,_=Object(a.cloneDeep)(e.map);if(_&&l){let t=Object(a.get)(e,"map.layers");if(t){Object(a.isString)(t)&&(t=t.replace(/\s/g,"").split(","));const s=(l.buttons||[]).reduce(((t,e)=>{if(!1===Object(a.isset)(e.buttons)){const s=e.value||e.id,i=e.segments;i&&Object(a.isArray)(i)&&!e.filter?i.forEach((e=>{const s=e.value.replace(/\:.+$/,"");Object(a.replace)(t,s,e.value)})):(Object(a.replace)(t,e.value,s),Object(a.replace)(t,e.id,s))}return t}),Object(a.cloneDeep)(t));Object(a.set)(e,"map.layers",s),Object(a.set)(_,"layers",null)}}this._map=new n.a(Object(r.a)(".awxjs__app__map",this._target),_),l&&!1!==l.enabled&&this._setupLayersPanel(l),h&&!1!==h.enabled&&this._setupInfoPanel(h),d&&!1!==d.enabled&&this._setupTimeline(d),u&&!1!==u.enabled&&this._setupSearchPanel(u),p&&!1!==p.enabled&&this._setupLegendsPanel(p);const g=new vt(this,this.panels.layers);g.on("select",(t=>{this.trigger("layer:select",Object.assign(Object.assign({},t.data),{source:this.getSource(t.data.key)}))})).on("deselect",(t=>{this.trigger("layer:deselect",Object.assign(Object.assign({},t.data),{source:this.getSource(t.data.key)}))})).on("change",(t=>{this.trigger("layer:change",Object.assign(Object.assign({},t.data),{source:this.getSource(t.data.key)}))})).on("change:control",(t=>{this.trigger("layer:change:control",Object.assign(Object.assign({},t.data),{source:this.getSource(t.data.key)}))})).on("error:module:add",(t=>{this._modulesToAddOnLoad.find((e=>e.key===t.data.key))||this._modulesToAddOnLoad.push(t.data)})),this._sourceManager=g,this._map.on("change:units",(t=>{this.trigger("change:units",t.data)})),this._map.on("ready",(()=>{this._ready=!0,this.trigger("ready")})),Object(r.a)(window).on("resize",(()=>{this._layout()})),this._layout(),setTimeout((()=>this._layout()),200)}addSource(t,e,s){const i=this.map.createSource(t,e,s);if(!i)return console.warn("[Aeris] Unable to add data source to InteractiveMapApp for key {".concat(t,"}, type {").concat(e,"} is invalid.\n\t\t\t\tData sources must be of type 'tile', 'vector', 'geojson' or 'text'. See\n\t\t\t\thttps://www.aerisweather.com/support/docs/toolkits/aeris-js-sdk/map-modules/data-sources/ for more info.")),null;i.strategy=this.map.strategy,this._sourceManager.addSource(t,i);const n=this.initialLayers();if(Object(a.isArray)(n)&&-1!==n.indexOf(t)){const e=this.panels.layers;e?e.select([t]):this.map.addSource(i,{id:t})}return i}getSource(t){return this._sourceManager.findSource(t)}showInfo(t,e,s){const i=this.panels.info;return i&&i.showContent(t,e,s),i}showInfoAtCoord(t,e,s,i){const n=this.panels.info;if(!t)return n;i||(i=Object(a.get)(this._opts,"panels.info.marker"));const{lat:o,lon:c}=Object(pt.b)(t);return n&&Object(a.isset)(o)&&Object(a.isset)(c)&&(n.showContent(e,s).load({p:"".concat(o,",").concat(c)}),this._infoPanelMarker&&this.map.strategy.removeMarker(this._infoPanelMarker),i&&(this._infoPanelMarker=this.map.strategy.factory.marker("info",t,i),this._infoPanelMarker&&this.map.strategy.addMarker(this._infoPanelMarker))),n}closeInfoPanel(){this.panels.info.close()}getPanel(t){const e=this._panels[t];return e||null}updatePanel(t,e){const s=this.getPanel(t);if(s&&(e=Object.assign(Object.assign({},s.opts),e),s.remove(!0),"layers"===t&&this.map.removeAllSources()),Object(a.set)(this._opts,"panels.".concat(t),e),!1!==e.enabled){switch(t){case"layers":this._setupLayersPanel(e);break;case"timeline":this._setupTimeline(e);break;case"legends":this._setupLegendsPanel(e);break;case"search":this._setupSearchPanel(e);break;case"info":this._setupInfoPanel(e)}this._layout()}}setMetric(t){this.map.setMetric(t)}setMode(t){this._opts.mode=t,this._target.removeClass("awxjs__mode-light awxjs__mode-dark"),this._target.addClass("awxjs__mode-".concat(this._opts.mode))}isReady(){return this._ready}initialLayers(){var t,e;const s=(null===(e=null===(t=this._opts)||void 0===t?void 0:t.map)||void 0===e?void 0:e.layers)||[];let i;return i=Object(a.isString)(s)?s.replace(/,\s+/,",").split(","):s,i}_setupLayersPanel(t){const e=void 0===this._panels.layers||null===this._panels.layers;this._panels.layers&&this._panels.layers.offAll();const s=new F(Object(a.extend)({},t,{id:"layers"}));s.addTo(this.$el),s.on("button:add button:remove change:size",(()=>{let t=s.$el.css("top");0===t.length&&(t=s.$el.css("bottom")),t=parseInt(t.replace(/[^\d]/,""),10);const e=!1===Number.isNaN(t);this._layout(e)})).on("show hide",(()=>{this._layout()})),this._panels.layers=s,this._sourceManager&&this._sourceManager.linkPanel(s);const i=(t,e)=>{if(t){const i=s.buttonForId(t);i&&i.setLoading(e)}};if(e){this.map.on("source:load:start",(t=>{i(t.data.layer,!0)})).on("source:load:done",(t=>{i(t.data.layer,!1)})).on("source:add",(t=>{this._sourceManager.handleSourceEvent("add",t.data.id)})).on("source:remove",(t=>{this._sourceManager.handleSourceEvent("remove",t.data.id)}));let t=Object(a.get)(this._opts,"map.layers");t&&(Object(a.isString)(t)&&(t=t.replace(/\s/g,"").split(",")),this.map.on("ready",(()=>{s.select(t)})))}}_setupInfoPanel(t){var e,s,i;const n=new G(Object(a.extend)({},t,{id:"info",account:this.account}));n.addTo(this.$el),this._panels.info=n,n.on("close",(()=>{this._infoPanelMarker&&(this.map.strategy.removeMarker(this._infoPanelMarker),this._infoPanelMarker=null)})).on("show hide",(()=>{this._layout()})),this.on("change:units",(t=>{const e=t.data.metric||!1;n.setMetric(e)}));const o=(null===(i=null===(s=null===(e=this._opts.panels)||void 0===e?void 0:e.info)||void 0===s?void 0:s.views)||void 0===i?void 0:i.localweather)||{views:[{renderer:"place"},{renderer:"units"},{title:"Active Threats",renderer:"threats"},{title:"Active Alerts",renderer:"alerts"},{title:"Impacts",renderer:"hazards"},{title:"Observations",renderer:"obs"},{title:"Outlook",renderer:"outlook"},{title:"Short-Term Forecast",renderer:"forecast"}]};this.panels.info.setContentView("localweather",o)}_setupTimeline(t){const e=Object(a.get)(t,"range.value"),s=Object(a.get)(this._opts,"map.timeline.from"),i=Object(a.get)(this._opts,"map.timeline.to");if(!e||Object(a.isset)(s)||Object(a.isset)(i))Object(a.set)(t,"range.value",[this.map.timeline.startOffset()/3600/1e3,this.map.timeline.endOffset()/3600/1e3]);else{const[t,s]=e;Object(a.isNumber)(t)&&this.map.timeline.setStartOffset(3600*t*1e3),Object(a.isNumber)(s)&&this.map.timeline.setEndOffset(3600*s*1e3)}const n=new it(this.map.timeline,Object(a.extend)({},t,{id:"timeline"}));n.on("change:range",(()=>{const t=this.map.timeline.currentTime;this.map.timeline.goToTime(t)})).on("show hide",(()=>{this._layout()})),n.addTo(this.$el),this._panels.timeline=n}_setupSearchPanel(t){const e=new ct(Object(a.extend)({},t,{id:"search"}));e.addTo(this.$el),this._panels.search=e,e.on("select",(t=>{const e=Object(a.get)(t.data,"result.loc");if(e){const{lat:t,long:s}=e,i={lat:t,lon:s};this.map.setView(i,8),this.showInfoAtCoord(i,"localweather","Local Weather")}}))}_setupLegendsPanel(t){const e=new at(Object(a.extend)({},t,{id:"legends",legend:{metric:this.map.isMetric}}));e.addTo(this.$el),this._panels.legends=e,this.map.on("layer:add",(t=>{if(!Object(a.isset)(t.data))return;const{layer:s,id:i}=t.data,n=s||i;if(n){n.toLowerCase().replace(/^[^\:]+\:\:/,"").replace(/\:[^,]+/g,"").replace(/__/,",").split(",").forEach((t=>{e.legend.add(t,{account:this.account,within:{bounds:this.map.getBounds()}})}))}})).on("layer:remove source:remove",(t=>{if(!Object(a.isset)(t.data))return;const{layer:s,id:i}=t.data,n=s||i;if(n){n.toLowerCase().replace(/^[^\:]+\:\:/,"").replace(/\:[^,]+/g,"").replace(/__/,",").split(",").forEach((t=>{e.legend.remove(t)}))}})).on("change:bounds",(t=>{const s={account:this.account};s.within={bounds:this.map.getBounds()},e.legend.update(s)})),this.on("change:units",(t=>{e.legend.setMetric(t.data.metric)}))}}var ft=bt;class wt extends ft{}class jt extends F{}class Ot extends G{}class xt extends it{}class yt extends at{}class St extends ct{}let kt,Mt;var Ct,Et;(Et=Ct||(Ct={})).setAccount=t=>{kt=t},Et.setServers=t=>{Mt=t},Et.InteractiveMapApp=function(t,e){return new wt(t,Object.assign({},e,{account:kt,servers:e.servers||Mt}))},Et.panels={LayersPanel:function(t){return new jt(t)},InfoPanel:function(t){return new Ot(t)},TimelinePanel:function(t,e){return new xt(t,e)},LegendPanel:function(t){return new yt(t)},PlaceSearchPanel:function(t){return new St(t)}},Et.ui={Tooltip:function(t,e){return new w(t,e)}}},v3JS:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));s("UxlC");const i=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",",n="",a=t.toString();a=a.replace(/^-/,"");const o=a.split("."),c=o[0],r=o[1];if(/e/.test(a))n=a;else for(let t=c.length;t>0;t-=3)t<c.length&&(n=i+n),n=c.slice(Math.max(0,t-3),t)+n;if(r){const t=e-r.length>0?"0".repeat(e-r.length):"";n+=s+"".concat(t).concat(r).substr(0,e)}return(t<0?"-":"")+n}}}]);