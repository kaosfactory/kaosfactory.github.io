/*!
 * 
 * 	@aerisweather/javascript-sdk - 1.8.2
 * 	(c) 2024 AerisWeather
 * 	License: BSD
 * 	https://www.aerisweather.com/support/docs/toolkits/aeris-js-sdk/
 * 
 */
(this.webpackJsonp=this.webpackJsonp||[]).push([["aerisweather.maps"],{Bmhh:function(t,e,n){"use strict";n.r(e),n.d(e,"Views",(function(){return B}));n("zKZe"),n("07d7"),n("SuFq"),n("JfAA");var a,s=n("lwsE"),i=n.n(s),o=n("7W2i"),r=n.n(o),c=n("a1gu"),u=n.n(c),h=n("Nsbk"),l=n.n(h),f=n("5kaa"),d=(n("ma9I"),n("QWBl"),n("yXV3"),n("oVuX"),n("2B1R"),n("E9XD"),n("+2oP"),n("pDQq"),n("tkto"),n("rB9j"),n("Rm1S"),n("UxlC"),n("EnZy"),n("FZtP"),n("W8MJ")),p=n.n(d),g=n("m0x2"),m=(n("TeQF"),n("fbCW"),n("TWNs"),n("RIqP")),v=n.n(m),y=(n("sMBO"),{us:{name:"United States",bounds:{north:56.26,west:-131.39,south:15.45,east:-61.17}},usne:{name:"Northeast",bounds:{north:50.37,west:-87.71,south:36.42,east:-61.96}},usec:{name:"Mid-Atlantic",bounds:{north:42.16,west:-88.18,south:31.62,east:-70.55}},usse:{name:"Southeast",bounds:{north:38.85,west:-99.23,south:22.31,east:-73.48}},usnc:{name:"Northern Plains",bounds:{north:51.18,west:-107.8,south:37.44,east:-82.05}},usov:{name:"Lower Ohio Valley",bounds:{north:43.1,west:-97.1,south:32.7,east:-79.48}},usce:{name:"Central Plains",bounds:{north:47.37,west:-110.83,south:34.78,east:-88.42}},ussc:{name:"Southern Plains",bounds:{north:40.85,west:-111.05,south:24.69,east:-85.3}},usnw:{name:"Pacific Northwest",bounds:{north:52.5,west:-129.33,south:39.13,east:-103.53}},uswc:{name:"West Coast",bounds:{north:45.95,west:-129.02,south:33.06,east:-106.61}},ussw:{name:"Southwest",bounds:{north:44.15,west:-127.01,south:28.7,east:-101.21}},usak:{name:"Alaska",bounds:{north:72.87,west:-196.96,south:48.81,east:-127.18}},ushi:{name:"Hawaii",bounds:{north:24.61,west:-162.77,south:16.55,east:-151.3}},ca:{name:"Canada",bounds:{north:75.85,west:-146.95,south:38.96,east:-43.95}},mx:{name:"Mexico",bounds:{north:36.63,west:-119.4,south:11.44,east:-82.13}},crb:{name:"Caribbean",bounds:{north:29.57,west:-91.45,south:5.18,east:-57}},nam:{name:"North America",bounds:{north:75.32,west:-185.45,south:-4.57,east:-22.68}},sam:{name:"South America",bounds:{north:19.97,west:-125.51,south:-58.45,east:-1.75}},eur:{name:"Europe",bounds:{north:72.5,west:-41.5,south:30.3,east:59.41}},afr:{name:"Africa",bounds:{north:44.47,west:-44.83,south:-41.25,east:82.1}},mide:{name:"Middle East",bounds:{north:46.01,west:23.29,south:8.93,east:80.77}},aus:{name:"Australia",bounds:{north:-.18,west:107.05,south:-50.01,east:184.22}},nas:{name:"Northern Asia",bounds:{north:81.09,west:24.61,south:22.27,east:189.84}},sas:{name:"Southern Asia",bounds:{north:55.97,west:59.59,south:-15.45,east:171.04}},asia:{name:"Asia",bounds:{north:78.06,west:12.66,south:-14.94,east:206.02}},world:{name:"World",bounds:{north:85,west:-170.16,south:-67.07,east:191.6}}});!function(t){t.get=function(t){return y[t]},t.set=function(t,e){y[t]=e},t.slug=function(e){var n=t.get(e);if(n)return n.slug||"".concat(n.name).toLowerCase().replace(/\s+/,"-")},t.asArray=function(e,n){var a=[];return e.forEach((function(e){var s=t.get(e);if(s){var i={};Object.keys(n).forEach((function(a){var o=n[a],r=a;i[r]="key"===o||"code"===o?e:"slug"===o?t.slug(e):s[o]})),a.push(i)}})),a}}(a||(a={}));var b=n("0lfv");function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=l()(t);if(e){var s=l()(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return u()(this,n)}}var x=function(t){r()(n,t);var e=w(n);function n(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return i()(this,n),(t=e.call(this)).onChange=Object(b.debounce)((function(){t.trigger("change")}),500),t._opts=Object(b.extend)({},{layers:{base:void 0,data:void 0,overlays:void 0,text:void 0},center:void 0,zoom:3,bounds:void 0,size:{width:600,height:400},offset:"0",date:void 0,autoFuture:!0,combined:!1,metric:!1},a),t}return p()(n,[{key:"opts",value:function(t,e){return Object(b.isset)(e)?(Object(b.set)(this._opts,t,e),null):Object(b.get)(this._opts,t)}},{key:"data",value:function(){return this.opts("layers.data")}},{key:"setData",value:function(t){var e=this;if(this._opts.combined)this.opts("layers.data",t);else{var n=[],a=[];t.forEach((function(t){/-text-?/.test(t)&&e.layers.inGroup(t,"text")?n.push(t):a.push(t)})),this.opts("layers.data",a),this.opts("layers.text",n)}return this.trigger("change:data",{data:t}),this.onChange(),this}},{key:"base",value:function(){return this.opts("layers.base")}},{key:"setBase",value:function(t){return this.opts("layers.base",t),this.trigger("change:base",{base:t}),this.onChange(),this}},{key:"overlays",value:function(){return this.opts("layers.overlays")}},{key:"setOverlays",value:function(t){return this.opts("layers.overlays",t),this.trigger("change:overlays",{overlays:t}),this.onChange(),this}},{key:"hasOverlays",value:function(){var t=this.overlays();return t&&!Object(b.isEmpty)(t)}},{key:"text",value:function(){return this.opts("layers.text")}},{key:"setText",value:function(t){return this.opts("layers.text",t),this.trigger("change:text",{text:t}),this.onChange(),this}},{key:"hasText",value:function(){var t=this.text();return t&&!Object(b.isEmpty)(t)}},{key:"setLayers",value:function(t){return(t=t||{}).base&&this.setBase(t.base),t.data&&this.setData(t.data),t.overlays&&this.setOverlays(t.overlays),t.text&&this.setText(t.text),this}},{key:"offset",value:function(){return this.opts("offset")}},{key:"setOffset",value:function(t){return this.opts("offset","".concat(t)),this.trigger("change:offset",{offset:t}),this.onChange(),this}},{key:"setDate",value:function(t){t instanceof Date?this.setOffset(function(t){var e=new Date(t.getTime()+60*t.getTimezoneOffset()*1e3);return Object(b.formatDate)(e,"yyyyMMddHHmm00")}(t)):this.setOffset("".concat(t))}},{key:"center",value:function(){var t=this.opts("center");if(t&&/^[\d\.-]+,[\d\.-]+$/.test(t)){var e=t.split(",");if(e&&2===e.length)return{lat:parseFloat(e[0]),lon:parseFloat(e[1])}}return t}},{key:"setCenter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Object(b.isPlainObject)(t)){var n=t;t="".concat(n.lat,",").concat(n.lon)}return this.opts("center",t),delete this._opts.bounds,e>=0&&this.opts("zoom",e),this.trigger("change:center"),this.trigger("change:bounds"),this.onChange(),this}},{key:"zoom",value:function(){return this.opts("zoom")}},{key:"setZoom",value:function(t){return this.opts("zoom",t),this.trigger("change:zoom"),this.trigger("change:bounds"),this.onChange(),this}},{key:"bounds",value:function(){return this.opts("bounds")}},{key:"setBounds",value:function(t){return this.opts("bounds",t),delete this._opts.center,this.trigger("change:bounds"),this.onChange(),this}},{key:"setRegion",value:function(t){var e=a.get(t);return e&&(e.center?this.setCenter("".concat(e.center.lat,",").concat(e.center.lon),this.zoom()):e.bounds&&this.setBounds(e.bounds)),this}},{key:"size",value:function(){var t=this.opts("size");return t&&t.width&&t.height?{width:t.width,height:t.height}:null}},{key:"setSize",value:function(t,e){if("auto"===e){var n=this.opts("size.factor");n&&(e=Math.round(t*n))}return this._opts.size={width:t,height:e},this.trigger("change:size",this.size()),this.trigger("change:bounds"),this.onChange(),this}},{key:"metric",value:function(){return this.opts("metric")}},{key:"setMetric",value:function(t){return this.opts("metric",t),this.trigger("change:metric",{metric:t}),this.onChange(),this}},{key:"toRequestOpts",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];if((t=t||["base","data","overlays","text"]).forEach((function(t){var n=e.opts("layers.".concat(t));Object(b.isEmpty)(n)||(a=a.concat(n))})),a){var s=v()(a);if(t.indexOf("text")>-1&&(s=s.map((function(t){if(/-text-?/.test(t)&&e.layers.hasMetric(t)){var n=e.opts("metric")?"text-metric":"text",a=t.match(/^([\w-]+-text)(-metric)?(-(dk|lg)){0,2}/),s=a[1].replace(/-text.*$/,""),i=a[3]||"";return"".concat(s,"-").concat(n).concat(i)}return t.replace(/-metric/,"")}))),-1!==t.indexOf("data")||-1!==t.indexOf("text")){this.layers.future();var i=this.layers.futureCodes();this.opts("autoFuture")&&a.forEach((function(t){var n=e.layers.find("id","f".concat(t),!0);n&&-1===s.indexOf(n.id)&&s.splice(a.indexOf(t)+1,0,n.id)}));var o=function(t){var e=-1!==i.indexOf(t);return e||i.forEach((function(n){var a=new RegExp("^".concat(n,"-"));!e&&a.test(t)&&(e=!0)})),e};s=s.filter((function(t){return!(!e.layers.inGroup(t,"overlay")&&!e.layers.inGroup(t,"masks"))||(n?o(t):!o(t))}))}a=0===s.length?null:s}var r=this.center();if(Object(b.isPlainObject)(r)){var c=r;r="".concat(c.lat,",").concat(c.lon)}return{layers:{base:-1!==t.indexOf("base")?this.base():null,data:-1!==t.indexOf("data")?a:null,overlays:-1!==t.indexOf("overlays")?this.overlays():null,text:-1!==t.indexOf("text")?a:null},p:r,zoom:this.zoom(),bounds:this.bounds(),size:this.size(),offset:this.offset(),metric:this.metric(),format:"png"}}},{key:"layers",get:function(){return this._layers},set:function(t){this._layers=t}}]),n}(g.a),O=n("GdSY"),_=n("ry37"),j=n("dqFL"),k=function(){function t(e,n){i()(this,t),this._targets=e,this._opts=Object(b.extend)({enabled:!0,autoplay:!1,alwaysShowPast:!1,alwaysShowFuture:!1},n),this.init()}return p()(t,[{key:"init",value:function(){var t=this._targets,e=new j.a(this._opts);if(this._timeline=e,t.past){var n=new _.a(t.past,Object(b.extend)({},this._opts,{key:"past",alwaysShow:this._opts.alwaysShowPast}));e.add("past",n)}if(t.future){var a=new _.a(t.future,Object(b.extend)({},this._opts,{key:"future",future:!0,alwaysShow:this._opts.alwaysShowFuture}));e.add("future",a)}if(t.pastText){var s=new _.a(t.pastText,Object(b.extend)({},this._opts,{key:"pastText",alwaysShow:this._opts.alwaysShowPast}));e.add("pastText",s)}if(t.futureText){var i=new _.a(t.futureText,Object(b.extend)({},this._opts,{key:"futureText",future:!0,alwaysShow:this._opts.alwaysShowFuture}));e.add("futureText",i)}}},{key:"timeline",get:function(){return this._timeline}},{key:"provider",set:function(t){var e=this;Object.keys(this.timeline.animations).forEach((function(n){var a=e.timeline.animations[n];a instanceof _.a&&(a.provider=t)}))}},{key:"past",get:function(){return this.timeline.get("past")}},{key:"future",get:function(){return this.timeline.get("future")}},{key:"pastText",get:function(){return this.timeline.get("pastText")}},{key:"futureText",get:function(){return this.timeline.get("futureText")}}]),t}(),T=n("CVtS"),z=n("lnrW"),C=n("fnc3"),S=n("pAjv"),D=n("J8dV"),E=n("3j3Q");function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=l()(t);if(e){var s=l()(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return u()(this,n)}}var R={combined:["layers"],split:["base","past","future","overlays","past-text","future-text"]},A=function(){function t(e){i()(this,t),this._opts=Object(b.extend)({format:"MM/dd/yyyy hh:mm a",continuous:!0},e),this.element=Object(E.a)('<div class="awxjs__map-overlay__timestamp"></div>')}return p()(t,[{key:"continuous",value:function(){return!0===this._opts.continuous}},{key:"update",value:function(t){var e=new Date(t);this.element.html(Object(b.formatDate)(e,this._opts.format))}}]),t}(),F=function(t){r()(n,t);var e=P(n);function n(t){var a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(i()(this,n),(a=e.call(this))._ready=!1,a.handleLayerChange=function(t){if(a.timeline){var e=a.config.hasText(),n=a.timeline.get("pastText"),s=a.timeline.get("futureText");n&&n.enabled(e),s&&s.enabled(e)}a.trigger("change:data",{layers:a.config.data()})},a.handleOffsetChange=function(t){var e=t.data.offset;if(Object(b.isset)(e)&&(e="".concat(e),/^-/.test(e)||"0"===e||"current"==e?Object(b.get)(a.opts,"animation.alwaysShowFuture")||["future","futureText"].forEach((function(t){return a._targets[t].hide()})):Object(b.get)(a.opts,"animation.alwaysShowPast")||["past","pastText"].forEach((function(t){return a._targets[t].hide()})),a._timestamp)){var n=Object(b.offsetToTime)(a.config.offset());a._timestamp.update(n)}},a._loadingGroups=[],a.update=Object(b.debounce)((function(t){if(a._ready){var e=(a.config.data()||[]).length>0;a._animator.past.enabled(e),a._animator.pastText.enabled(e),a._animator.future.enabled(e),a._animator.futureText.enabled(e);var n=t||a._loadingGroups;if(0!==(n=a._adjustTypesForUpdate(n)).length){if(a.timeline&&a.timeline.reset(),a._timestamp&&(!a.timeline||!a.timeline.isEnabled())){var s=Object(b.offsetToTime)(a.config.offset());a._timestamp.update(s)}a.trigger("load:start");var i=function(){0===r.length&&(Object.keys(o).forEach((function(t){a.setImage(t,o[t])})),a.trigger("load:done"))},o={},r=n.slice(0);n.forEach((function(t){var e="future"==t,n=t;if("past"===t||"future"===t?n="data":"pastText"!==t&&"futureText"!==t||(n="text"),Object(b.isset)(a.config.opts("layers.".concat(n)))){if(a.timeline&&("data"===n||"text"===n)){var s=a.timeline.get(t);return void(s&&(s.canShow()?s.once("load:image load:error",(function(e){r.splice(r.indexOf(t),1),i()})):(r.splice(r.indexOf(t),1),i()),s.goToTime(a.timeline.currentTime)))}var c=a._request.clone();c.setParams(a.config.toRequestOpts([n],e)),c.get().then((function(e){r.splice(r.indexOf(t),1),e.image&&(o[t]=e.image.src),i()})).catch((function(t){}))}else r.forEach((function(t,e){"past"!==t&&"future"!==t&&"pastText"!==t&&"futureText"!==t||r.splice(e,1)})),a.setImage(t,null)}))}}}),500),!t)throw new Error("[Aeris] Invalid DOM target specified for MapView");return["base","data","overlays"].forEach((function(t){var e="map.layers.".concat(t),n=Object(b.get)(s,e);Object(b.isString)(n)&&Object(b.set)(s,e,n.replace(/\s/,"").split(","))})),a._opts=Object(b.extend)({account:null,map:{layers:{base:["flat"],overlays:["admin"]},center:{lat:40,lon:-93},size:{width:600,height:400},autoFuture:!0,combine:!1},animation:{enabled:!0,from:-7200,to:0,autoplay:!1,alwaysShowPast:!1,alwaysShowFuture:!1},overlays:{title:void 0,timestamp:"MM/dd/yyyy hh:mm a",branding:{html:void 0,img:void 0}},legend:{enabled:!0},controls:{layers:void 0,regions:void 0}},s),a._target=Object(E.a)(t),a._config=new x(a._opts.map),a._config.on("change",(function(){return a.trigger("change")})),a.account&&(a._request=new O.a({server:Object(b.get)(a._opts,"servers.maps"),client:a.account.credentials()})),a._layers=new z.a(a.account),a._layers.fetch().then((function(t){a.config.layers=a._layers,a.render()})),a}return p()(n,[{key:"el",value:function(t){return Object(E.a)(t,this.$el)}},{key:"setLayers",value:function(t,e){this.config.setLayers(t),e&&this.setLegend(e)}},{key:"setLegend",value:function(t){if(this._legendUrl=null,t)if(Object(b.isString)(t)){var e=t;e.match(/^(https?:)?\/\//)?(this._legendUrl=e,this.legend.setUrl(e)):this.legend.set(e.replace(/\s/g,"").split(","))}else Object(b.isArray)(t)&&this.legend.set(t)}},{key:"setMetric",value:function(t){this.config.setMetric(t)}},{key:"render",value:function(){this.$el.empty(),this.$el.html('\n\t\t\t<div class="awxjs__mapview">\n\t\t\t\t<ul class="awxjs__map-nav"></ul>\n\t\t\t\t<div class="awxjs__map-container">\n\t\t\t\t\t<div class="awxjs__map">\n\t\t\t\t\t\t<ul class="awxjs__map-region-nav horizontal"></ul>\n\t\t\t\t\t\t<ul class="awxjs__map-anim-controls">\n\t\t\t\t\t\t\t<li data-anim-action="toggle"><button>Play</button></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="awxjs__map-legend"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t');var t=this.opts,e=Object(E.a)(".".concat(D.a.cssPrefix,"map-container > .").concat(D.a.cssPrefix,"map"),this.$el);this._map=e;var n=e.width()||320,a=e.height()||300;t.map.size&&(n=t.map.size.width||n,a=t.map.size.height||a,"auto"===n&&(n=e.width(),t.map.size.width=n,t.map.size.autoscale&&Object(E.a)(window).on("resize",(function(n){var a=e.width();t.map.size.width=a}))));var s=this.config.size(),i=s.width,o=s.height;i&&o&&(e.width(i).height(o),this.$container.width(i)),t.map.region&&!t.map.bounds&&this.config.setRegion(t.map.region);var r=this.opts.overlays,c=this.opts.controls,u=this.opts.animation,h=this.opts.legend;this.setupContainers(e),r&&this.setupOverlays(r),c&&this.setupControls(c),u&&this.setupAnimation(u),h&&this.setupLegend(h),this.setupEvents(),this.trigger("ready"),this._ready=!0,this.updateGroups()}},{key:"setupEvents",value:function(){var t=this;if(this.config.on("change:data change:offset",(function(e){t.updateGroups(["past","future"])})),this.config.on("change:units",(function(e){t.updateGroups(["pastText","futureText"])})),this.config.on("change:data",this.handleLayerChange),this.config.on("change:bounds change:size",(function(e){t.updateGroups()})),this.config.on("change:size",(function(e){var n=e.data,a=n.width,s=n.height;a&&s&&(t.$map.width(a).height(s),t.$container.width(a))})),this.timeline||(this.config.on("change:offset",this.handleOffsetChange),this.config.setOffset(this.config.offset())),this._timestamp&&this.timeline){var e=this._timestamp;!1===e.continuous()?this.timeline.on("advance:image",(function(t){e.update(t.data.time)})):this.timeline.on("advance",(function(t){e.update(t.data.time)})),this.timeline instanceof j.a&&Object.keys(this.timeline.animations).forEach((function(n){var a,s=t.timeline.get(n);s.isEnabled()&&("past"===n||"future"===n)&&(a=s),a&&a.on("load:progress",(function(t){a.canShow()&&e.update(t.data.time)}))}))}}},{key:"setupContainers",value:function(t){var e=this,n="".concat(D.a.cssPrefix,"map__layers");t.append('<div class="'.concat(n,'"></div>'));var a=this.el(".".concat(n));this._indicator=new C.a,this._indicator.appendTo(a[0]),this.on("load:start",(function(){e._indicator.startAnimating()})),this.on("load:done",(function(){e._indicator.stopAnimating()}));var s=this.opts.map.combine?R.combined:R.split,i={};s.forEach((function(t,e){var n="".concat(D.a.cssPrefix,"map-layer-").concat(t);a.append('<div class="'.concat(n,'"></div>'));var s=Object(S.camelcase)(t),o=Object(E.a)(".".concat(n),a);o.css({position:"absolute",top:0,left:0,bottom:0,right:0,"z-index":e}),i[s]=o})),this._targets=i}},{key:"setupControls",value:function(t){var e=this;if(t.layers){var n=this.el(".".concat(D.a.cssPrefix,"map-nav"));t.layers.forEach((function(t){n.append('<li data-map-layer="'.concat(t.value,'"><button>').concat(t.title,"</button></li>"))}));var a=Object(E.a)("li",n);a.on("click",(function(t){t.preventDefault();var n="button"===t.target.tagName.toLowerCase()?Object(E.a)(t.target).parent():Object(E.a)(t.target),s=n.allData("map-layer");a.removeClass("selected"),n.addClass("selected"),s&&e.config.setData(s.split(","))})),this.on("ready",(function(t){var n=Object(b.get)(e.opts,"map.layers.data")||null;n?a.each((function(t,e){var a=Object(E.a)(t);(a.allData("map-layer")===n.join(",")||0===e)&&a.click()})):a.get(0).click()}))}if(t.regions){var s=this,i=this.el(".".concat(D.a.cssPrefix,"map-region-nav"));t.regions.forEach((function(t){var e=Object.keys(t).reduce((function(e,n){if("title"!==n){var a=t[n];Object(b.isObject)(a)&&("center"===n?a="".concat(a.lat,",").concat(a.lon):"bounds"===n&&(a="".concat(a.north,",").concat(a.west,",").concat(a.south,",").concat(a.east))),e.push("data-map-".concat(n,'="').concat(a,'"'))}return e}),[]);i.append("<li ".concat(e.join(" "),"><button>").concat(t.title,"</button></li>"))}));var o=Object(E.a)("li",i);o.on("click",(function(t){t.preventDefault();var n="button"===t.target.tagName.toLowerCase()?Object(E.a)(t.target).parent():Object(E.a)(t.target),a=n.allData("map-zoom"),i=n.allData("map-center")||Object(b.get)(e.opts,"map.center"),r=n.allData("map-region"),c=n.allData("map-bounds");if(o.removeClass("selected"),n.addClass("selected"),r)s.config.setRegion(r);else if(c){var u=c.split(",");4===u.length&&s.config.setBounds({north:u[0],west:u[1],south:u[2],east:u[3]})}else i&&!Object(b.isEmpty)(i)?Object(b.isset)(a)&&a>0?s.config.setCenter(i,a):s.config.setCenter(i,e.config.zoom()):a>0&&s.config.setZoom(a)})),this.on("ready",(function(t){var n=Object(b.get)(e.opts,"map.zoom")||null;Object(b.isset)(n)?o.each((function(t,e){var a=Object(E.a)(t);(a.allData("map-zoom")==="".concat(n)||0===e)&&a.click()})):o.get(0).click()}))}}},{key:"setupOverlays",value:function(t){var e="".concat(D.a.cssPrefix,"map__overlays");this.$map.append('<div class="'.concat(e,'"></div>'));var n=this.el(".".concat(e));if(t.timestamp){var a=t.timestamp;Object(b.isString)(a)&&(a={format:a});var s=new A(a);s.element.css({"z-index":10}),n.append(s.element),this._timestamp=s}if(t.title){var i="".concat(D.a.cssPrefix,"map-overlay__title");n.append('<div class="'.concat(i,'">').concat(t.title,"</div>")),Object(E.a)(".".concat(i),n).css({"z-index":11})}if(t.branding){var o=t.branding,r=o.img,c=o.html,u="".concat(D.a.cssPrefix,"map-overlay__branding");n.append('<div class="'.concat(u,'"></div>'));var h=Object(E.a)(".".concat(u),n);h.css({"z-index":12}),Object(b.isset)(r)?h.html('<img src="'.concat(r,'" />')):Object(b.isset)(c)&&h.html(c)}}},{key:"setupAnimation",value:function(t){var e=this,n=this.el(".awxjs__map-anim-controls > li");if(!t.enabled)return this.config.setOffset(Object(b.get)(this.opts,"map.offset")||0),void n.remove();var a=new k({past:this._targets.past,future:this._targets.future,pastText:this._targets.pastText,futureText:this._targets.futureText},t);a.provider=this,this._animator=a;var s=a.timeline;s.on("load:start",(function(){e._indicator.startAnimating()})),s.on("load:done load:error",(function(){e._indicator.stopAnimating()})),this.config.opts("autoFuture",s.containsFuture()),s.on("end:change",(function(t){e.config.opts("autoFuture",s.containsFuture())})),s.on("start:change end:change",(function(t){s.canAnimate()?n.show():n.hide()})),s.canAnimate()||n.hide(),this.on("ready",(function(){e.config.on("change:data change:size change:zoom change:offset change:center change:bounds",(function(t){})),e.config.on("change:units",(function(t){s.stop();var e=s.get("pastText");e&&e.reset();var n=s.get("futureText");n&&n.reset()})),s.goToInit(),s.isAutoPlay()&&e.once("load:done",(function(){setTimeout((function(){s.play()}),500)}))})),n.each((function(t){var e=Object(E.a)(t);if("toggle"===e.allData("anim-action")){var n=Object(E.a)("button",e);s.on("play load:start",(function(){n.html("Stop")})),s.on("stop",(function(){n.html("Play")}))}})).on("click",(function(t){t.preventDefault();var e=("button"===t.target.tagName.toLowerCase()?Object(E.a)(t.target).parent():Object(E.a)(t.target)).allData("anim-action");"toggle"===e?s.toggle():"play"===e?s.play():"pause"===e?s.pause():"stop"===e&&s.stop()}))}},{key:"setupLegend",value:function(t){var e=this,n=this.el(".awxjs__map-legend");if(t.enabled){var a=new T.a(n,Object(b.extend)({size:{width:this.$map.width()}},t));this._legend=a;var s=Object(b.debounce)((function(){if(!e._legendUrl){var t=e.config.data(),n={account:e.account};t&&-1!==t.indexOf("alerts")&&(n.within={bounds:e.config.bounds(),center:e.config.center(),zoom:e.config.zoom(),size:e.config.size()}),a.set(t,n)}}),50);this.config.on("change:data change:bounds",(function(t){s()})),this.config.on("change:size",(function(t){a.setWidth(t.data.width)})),this.config.on("change:metric",(function(t){a.setMetric(t.data.metric)})),s()}else n.remove()}},{key:"setImage",value:function(t,e){var n=Object(E.a)(".".concat(D.a.cssPrefix,"map-layer-").concat(t),this.$el);n&&(n.empty(),e&&n.append('<img src="'.concat(e,'" width="').concat(this.config.size().width,'" height="').concat(this.config.size().height,'">')))}},{key:"updateGroups",value:function(t){var e=this;(t=t||["base","past","future","overlays"]).forEach((function(t){-1===e._loadingGroups.indexOf(t)&&e._loadingGroups.push(t)})),this.update()}},{key:"_adjustTypesForUpdate",value:function(t){var e=t.splice(0),n=(new Date).getTime();if(this.timeline&&this.timeline.isEnabled()){var a=e.indexOf("past");a>-1&&this.timeline.startDate().getTime()>n&&e.splice(a,1);var s=e.indexOf("future");s>-1&&this.timeline.endDate().getTime()<=n&&!1===this._animator.timeline.get("future").canShow()&&e.splice(s,1)}return this.config.hasText()&&(e.indexOf("past")>-1&&e.push("pastText"),e.indexOf("future")>-1&&e.push("futureText")),e}},{key:"animationUrlForDate",value:function(t,e){var n=this._request.clone(),a=/text$/i.test(t.key)?"text":"data",s=this.config.toRequestOpts([a],t.isFuture());return"data"===a&&Object(b.isset)(s.layers.data)||"text"===a&&Object(b.isset)(s.layers.text)?(n.setParams(s),n.date(e),n.url()):null}},{key:"animationSizeForImage",value:function(t){return this.config.size()}},{key:"$el",get:function(){return this._target}},{key:"$map",get:function(){return this._map}},{key:"$container",get:function(){return Object(E.a)(".".concat(D.a.cssPrefix,"map-container"),this.$el)}},{key:"account",get:function(){return this.opts.account}},{key:"opts",get:function(){return this._opts}},{key:"config",get:function(){return this._config}},{key:"timeline",get:function(){return this._animator?this._animator.timeline:null}},{key:"legend",get:function(){return this._legend}}]),n}(g.a),M=n("gqGf"),$=n("R1Yn");function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=l()(t);if(e){var s=l()(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return u()(this,n)}}var G,q,B,N,I=function(t){r()(n,t);var e=L(n);function n(){return i()(this,n),e.apply(this,arguments)}return n}(f.a);(N=B||(B={})).utils=Object.assign({},$),N.datasources={Tile:M.c,Vector:M.d,GeoJson:M.a,Text:M.b},N.setAccount=function(t){G=t},N.setServers=function(t){q=t},N.InteractiveMap=function(t,e,n){return new I(t,Object.assign({},e,{account:G,servers:e.servers||q}),n)},N.Map=function(t,e){return new F(t,Object.assign({},e,{account:G,servers:e.servers||q}))},N.Legend=function(t,e){return new T.a(t,Object.assign({},e,{account:G}))}}}]);